(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{515:function(e,a,t){Promise.resolve().then(t.bind(t,5561))},8882:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(7415).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5561:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var s=t(8357),r=t(921),i=t(7925),l=t(6829),n=t(1374),c=t(1808),o=t(8556),d=t(8288),u=t(8267),m=t(7415);let h=(0,m.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=(0,m.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=t(8882);function f(){let[e,a]=(0,r.useState)("student"),[t,m]=(0,r.useState)("join"),[f,g]=(0,r.useState)("login"),[y,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1),C=(0,l.useRouter)(),_=(0,i.e)(),[S,I]=(0,r.useState)(""),[k,E]=(0,r.useState)(""),[D,z]=(0,r.useState)(""),[P,L]=(0,r.useState)(""),[M,q]=(0,r.useState)(""),[U,A]=(0,r.useState)(""),[B,Z]=(0,r.useState)(""),[T,O]=(0,r.useState)(""),[Y,H]=(0,r.useState)(""),[J,R]=(0,r.useState)(""),[X,F]=(0,r.useState)([]);(0,r.useEffect)(()=>{F(Array.from({length:20},()=>({x:100*Math.random(),y:100*Math.random(),size:4*Math.random()+2,delay:5*Math.random()})))},[]);let W=async e=>{if(e.preventDefault(),b(!0),v(""),4!==D.length||!/^\d{4}$/.test(D)){v("PIN must be exactly 4 digits"),b(!1);return}if(D!==P){v("PINs do not match"),b(!1);return}try{let{data:e,error:a}=await _.from("classes").select("*").eq("code",k.toUpperCase()).single();if(a||!e){v("Class not found. Check your code."),b(!1);return}let{data:t}=await _.from("users").select("id").eq("name",S.trim()).eq("class_id",e.id).single();if(t){v('This name is already registered. Use "Returning Student" to log in.'),b(!1);return}let s="".concat(S.toLowerCase().replace(/\s/g,""),"_").concat(Date.now(),"@student.leadership.local"),{data:r,error:i}=await _.auth.signUp({email:s,password:"".concat(D,"_").concat(crypto.randomUUID())});if(i)throw i;let{error:l}=await _.from("users").insert({id:r.user.id,email:s,name:S.trim(),role:"student",class_id:e.id,pin:D,avatar_seed:crypto.randomUUID()});if(l)throw l;await _.from("world_states").insert({student_id:r.user.id}),localStorage.setItem("leadership_user_id",r.user.id),localStorage.setItem("leadership_user_name",S.trim()),localStorage.setItem("leadership_class_id",e.id),C.push("/student")}catch(e){v(e.message||"Something went wrong")}finally{b(!1)}},Q=async e=>{e.preventDefault(),b(!0),v("");try{let{data:e,error:a}=await _.from("classes").select("id").eq("code",U.toUpperCase()).single();if(a||!e){v("Class not found. Check your code."),b(!1);return}let{data:t,error:s}=await _.from("users").select("*").eq("name",M.trim()).eq("class_id",e.id).eq("pin",B).single();if(s||!t){v("Name, class code, or PIN is incorrect."),b(!1);return}localStorage.setItem("leadership_user_id",t.id),localStorage.setItem("leadership_user_name",t.name),localStorage.setItem("leadership_class_id",t.class_id),localStorage.setItem("leadership_show_welcome","true"),window.location.href="/student"}catch(e){v(e.message||"Something went wrong")}finally{b(!1)}},V=async e=>{e.preventDefault(),b(!0),v("");try{if("register"===f){let{data:e,error:a}=await _.auth.signUp({email:T,password:Y});if(a)throw a;let t=null;for(let a of[{name:"Leadership 1st Period",suffix:"1ST"},{name:"Leadership 2nd A",suffix:"2A"},{name:"Leadership 2nd B",suffix:"2B"}]){let s=Math.random().toString(36).substring(2,5).toUpperCase()+a.suffix,{data:r,error:i}=await _.from("classes").insert({name:a.name,code:s,teacher_id:e.user.id,current_lesson_id:1}).select().single();if(i)throw i;t||(t=r.id)}let{error:s}=await _.from("users").insert({id:e.user.id,email:T,name:J,role:"teacher",class_id:t});if(s)throw s;C.push("/teacher")}else{let{error:e}=await _.auth.signInWithPassword({email:T,password:Y});if(e)throw e;C.push("/teacher")}}catch(a){let e=a.message||"Something went wrong";e.includes("Email not confirmed")?v("\uD83D\uDCE7 Please check your email to confirm your account, then try logging in again."):e.includes("Invalid login")?v("Email or password is incorrect."):e.includes("already registered")?v("This email is already registered. Try logging in instead."):e.includes("row-level security")?v("⚠️ Registration temporarily unavailable. Please contact your administrator."):v(e)}finally{b(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-primary-500/20 rounded-full blur-3xl animate-float"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-community/20 rounded-full blur-3xl animate-float",style:{animationDelay:"-3s"}}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-care/10 rounded-full blur-3xl"}),X.map((e,a)=>(0,s.jsx)(n.E.div,{className:"absolute rounded-full bg-white/20",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),width:e.size,height:e.size},animate:{y:[0,-30,0],opacity:[.2,.8,.2]},transition:{duration:4,delay:e.delay,repeat:1/0,ease:"easeInOut"}},a)),(0,s.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:50px_50px]"})]}),(0,s.jsx)("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[(0,s.jsxs)(n.E.div,{className:"text-center mb-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,s.jsxs)("div",{className:"relative inline-block mb-4",children:[(0,s.jsx)("div",{className:"text-7xl",children:"\uD83C\uDF31"}),(0,s.jsx)(n.E.div,{className:"absolute -top-2 -right-2",animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:(0,s.jsx)(o.Z,{className:"text-primary-400",size:24})})]}),(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:(0,s.jsx)("span",{className:"gradient-text",children:"Leadership 2.0"})}),(0,s.jsx)("p",{className:"text-surface-400",children:"Build real skills through real action"})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsxs)(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("student"),className:"flex-1 py-3.5 px-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ".concat("student"===e?"bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-surface-800/80 text-surface-400 hover:text-surface-200 hover:bg-surface-700/80"),children:[(0,s.jsx)(d.Z,{size:20}),"Student"]}),(0,s.jsxs)(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("teacher"),className:"flex-1 py-3.5 px-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ".concat("teacher"===e?"bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-surface-800/80 text-surface-400 hover:text-surface-200 hover:bg-surface-700/80"),children:[(0,s.jsx)(u.Z,{size:20}),"Teacher"]})]}),(0,s.jsxs)(n.E.div,{layout:!0,className:"card-glow p-6 rounded-2xl",children:[(0,s.jsx)(c.M,{mode:"wait",children:j&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-courage/10 border border-courage/30 rounded-xl text-courage text-sm error-shake",children:j})}),(0,s.jsx)(c.M,{mode:"wait",children:"student"===e?(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)("button",{onClick:()=>m("join"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("join"===t?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"✨ New Student"}),(0,s.jsx)("button",{onClick:()=>m("login"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("login"===t?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"\uD83D\uDC4B Returning"})]}),"join"===t?(0,s.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Enter your full name",value:S,onChange:e=>I(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Class Code"}),(0,s.jsx)("input",{type:"text",className:"input uppercase tracking-widest text-center font-mono text-lg",placeholder:"ABC123",maxLength:6,value:k,onChange:e=>E(e.target.value.toUpperCase()),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Create a 4-Digit PIN"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:D,onChange:e=>z(e.target.value.replace(/\D/g,"")),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-500 hover:text-surface-300",children:N?(0,s.jsx)(h,{size:20}):(0,s.jsx)(x,{size:20})})]}),(0,s.jsx)("p",{className:"text-xs text-surface-500 mt-1.5",children:"You'll use this PIN to log back in"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Confirm PIN"}),(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:P,onChange:e=>L(e.target.value.replace(/\D/g,"")),required:!0})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"loading-spinner",style:{width:20,height:20,borderWidth:2}}),"Joining..."]}):(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Join Class ",(0,s.jsx)(p.Z,{size:20})]})})]}):(0,s.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Enter your full name",value:M,onChange:e=>q(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Class Code"}),(0,s.jsx)("input",{type:"text",className:"input uppercase tracking-widest text-center font-mono text-lg",placeholder:"ABC123",maxLength:6,value:U,onChange:e=>A(e.target.value.toUpperCase()),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your PIN"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:B,onChange:e=>Z(e.target.value.replace(/\D/g,"")),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-500 hover:text-surface-300",children:N?(0,s.jsx)(h,{size:20}):(0,s.jsx)(x,{size:20})})]})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?"Logging in...":(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Welcome Back ",(0,s.jsx)(p.Z,{size:20})]})})]})]},"student"):(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)("button",{onClick:()=>g("login"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("login"===f?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"Login"}),(0,s.jsx)("button",{onClick:()=>g("register"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("register"===f?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"Register"})]}),(0,s.jsxs)("form",{onSubmit:V,className:"space-y-4",children:["register"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Your name",value:J,onChange:e=>R(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface-800/50 rounded-xl border border-surface-700",children:[(0,s.jsx)("p",{className:"font-medium text-surface-300 mb-2 flex items-center gap-2",children:"\uD83D\uDCDA 3 Classes will be created:"}),(0,s.jsxs)("ul",{className:"text-sm text-surface-400 space-y-1",children:[(0,s.jsx)("li",{children:"• Leadership 1st Period"}),(0,s.jsx)("li",{children:"• Leadership 2nd A"}),(0,s.jsx)("li",{children:"• Leadership 2nd B"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"input",placeholder:"your@email.com",value:T,onChange:e=>O(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"input",placeholder:"••••••••",value:Y,onChange:e=>H(e.target.value),required:!0,minLength:6})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?"Please wait...":"register"===f?"Create Account":"Login"})]})]},"teacher")})]}),(0,s.jsxs)(n.E.p,{className:"text-center text-surface-500 text-sm mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,s.jsx)("span",{className:"text-primary-400",children:"The 51/49 Principle:"})," Master yourself before leading others."]})]})})]})}},7925:function(e,a,t){"use strict";t.d(a,{e:function(){return i}});var s=t(9982);let r=null;function i(){if(r)return r;let e="https://apakkhzuydsfzvypewwa.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYWtraHp1eWRzZnp2eXBld3dhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1MDEyODQsImV4cCI6MjA4NDA3NzI4NH0.c3hiZOEKMIXMP7aB0SVgrbQH58nwxseycVmeH23KsNQ";if(!e||!a)throw Error("Missing Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");return r=(0,s.createBrowserClient)(e,a)}}},function(e){e.O(0,[194,741,564,744],function(){return e(e.s=515)}),_N_E=e.O()}]);