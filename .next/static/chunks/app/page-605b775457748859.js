(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9734:function(e,t,a){Promise.resolve().then(a.bind(a,3628))},6858:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},1769:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},3628:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),r=a(2265),l=a(8933),i=a(9376),n=a(1344),c=a(8614),o=a(2023),d=a(1769),u=a(5805),m=a(9205);let x=(0,m.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),h=(0,m.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=a(6858);function f(){let[e,t]=(0,r.useState)("student"),[a,m]=(0,r.useState)("join"),[f,g]=(0,r.useState)("login"),[y,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),[N,w]=(0,r.useState)(!1),_=(0,i.useRouter)(),C=(0,l.e)(),[S,k]=(0,r.useState)(""),[E,L]=(0,r.useState)(""),[P,U]=(0,r.useState)(""),[I,D]=(0,r.useState)(""),[A,q]=(0,r.useState)(""),[B,z]=(0,r.useState)(""),[M,T]=(0,r.useState)(""),[Z,Y]=(0,r.useState)(""),[O,R]=(0,r.useState)(""),[H,X]=(0,r.useState)(""),[F,J]=(0,r.useState)([]);(0,r.useEffect)(()=>{J(Array.from({length:20},()=>({x:100*Math.random(),y:100*Math.random(),size:4*Math.random()+2,delay:5*Math.random()})))},[]);let K=async e=>{if(e.preventDefault(),b(!0),v(""),4!==P.length||!/^\d{4}$/.test(P)){v("PIN must be exactly 4 digits"),b(!1);return}if(P!==I){v("PINs do not match"),b(!1);return}try{let{data:e,error:t}=await C.from("classes").select("*").eq("code",E.toUpperCase()).single();if(t||!e){v("Class not found. Check your code."),b(!1);return}let{data:a}=await C.from("users").select("id").eq("name",S.trim()).eq("class_id",e.id).single();if(a){v('This name is already registered. Use "Returning Student" to log in.'),b(!1);return}let s="".concat(S.toLowerCase().replace(/\s/g,""),"_").concat(Date.now(),"@student.leadership.local"),{data:r,error:l}=await C.auth.signUp({email:s,password:"".concat(P,"_").concat(crypto.randomUUID())});if(l)throw l;let{error:i}=await C.from("users").insert({id:r.user.id,email:s,name:S.trim(),role:"student",class_id:e.id,pin:P,avatar_seed:crypto.randomUUID()});if(i)throw i;await C.from("world_states").insert({student_id:r.user.id}),localStorage.setItem("leadership_user_id",r.user.id),localStorage.setItem("leadership_user_name",S.trim()),localStorage.setItem("leadership_class_id",e.id),_.push("/student")}catch(e){v(e.message||"Something went wrong")}finally{b(!1)}},W=async e=>{e.preventDefault(),b(!0),v("");try{let{data:e,error:t}=await C.from("classes").select("id").eq("code",B.toUpperCase()).single();if(t||!e){v("Class not found. Check your code."),b(!1);return}let{data:a,error:s}=await C.from("users").select("*").eq("name",A.trim()).eq("class_id",e.id).eq("pin",M).single();if(s||!a){v("Name, class code, or PIN is incorrect."),b(!1);return}localStorage.setItem("leadership_user_id",a.id),localStorage.setItem("leadership_user_name",a.name),localStorage.setItem("leadership_class_id",a.class_id),window.location.href="/student"}catch(e){v(e.message||"Something went wrong")}finally{b(!1)}},V=async e=>{e.preventDefault(),b(!0),v("");try{if("register"===f){let{data:e,error:t}=await C.auth.signUp({email:Z,password:O});if(t)throw t;let a=null;for(let t of[{name:"Leadership 1st Period",suffix:"1ST"},{name:"Leadership 2nd A",suffix:"2A"},{name:"Leadership 2nd B",suffix:"2B"}]){let s=Math.random().toString(36).substring(2,5).toUpperCase()+t.suffix,{data:r,error:l}=await C.from("classes").insert({name:t.name,code:s,teacher_id:e.user.id,current_lesson_id:1}).select().single();if(l)throw l;a||(a=r.id)}let{error:s}=await C.from("users").insert({id:e.user.id,email:Z,name:H,role:"teacher",class_id:a});if(s)throw s;_.push("/teacher")}else{let{error:e}=await C.auth.signInWithPassword({email:Z,password:O});if(e)throw e;_.push("/teacher")}}catch(e){v(e.message||"Something went wrong")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-primary-500/20 rounded-full blur-3xl animate-float"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-community/20 rounded-full blur-3xl animate-float",style:{animationDelay:"-3s"}}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-care/10 rounded-full blur-3xl"}),F.map((e,t)=>(0,s.jsx)(n.E.div,{className:"absolute rounded-full bg-white/20",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),width:e.size,height:e.size},animate:{y:[0,-30,0],opacity:[.2,.8,.2]},transition:{duration:4,delay:e.delay,repeat:1/0,ease:"easeInOut"}},t)),(0,s.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:50px_50px]"})]}),(0,s.jsx)("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[(0,s.jsxs)(n.E.div,{className:"text-center mb-8",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,s.jsxs)("div",{className:"relative inline-block mb-4",children:[(0,s.jsx)("div",{className:"text-7xl",children:"\uD83C\uDF31"}),(0,s.jsx)(n.E.div,{className:"absolute -top-2 -right-2",animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:(0,s.jsx)(o.Z,{className:"text-primary-400",size:24})})]}),(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:(0,s.jsx)("span",{className:"gradient-text",children:"Leadership 2.0"})}),(0,s.jsx)("p",{className:"text-surface-400",children:"Build real skills through real action"})]}),(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsxs)(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("student"),className:"flex-1 py-3.5 px-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ".concat("student"===e?"bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-surface-800/80 text-surface-400 hover:text-surface-200 hover:bg-surface-700/80"),children:[(0,s.jsx)(d.Z,{size:20}),"Student"]}),(0,s.jsxs)(n.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t("teacher"),className:"flex-1 py-3.5 px-4 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 ".concat("teacher"===e?"bg-gradient-to-r from-primary-600 to-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-surface-800/80 text-surface-400 hover:text-surface-200 hover:bg-surface-700/80"),children:[(0,s.jsx)(u.Z,{size:20}),"Teacher"]})]}),(0,s.jsxs)(n.E.div,{layout:!0,className:"card-glow p-6 rounded-2xl",children:[(0,s.jsx)(c.M,{mode:"wait",children:j&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4 p-3 bg-courage/10 border border-courage/30 rounded-xl text-courage text-sm",children:j})}),(0,s.jsx)(c.M,{mode:"wait",children:"student"===e?(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)("button",{onClick:()=>m("join"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("join"===a?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"✨ New Student"}),(0,s.jsx)("button",{onClick:()=>m("login"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("login"===a?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"\uD83D\uDC4B Returning"})]}),"join"===a?(0,s.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Enter your full name",value:S,onChange:e=>k(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Class Code"}),(0,s.jsx)("input",{type:"text",className:"input uppercase tracking-widest text-center font-mono text-lg",placeholder:"ABC123",maxLength:6,value:E,onChange:e=>L(e.target.value.toUpperCase()),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Create a 4-Digit PIN"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:P,onChange:e=>U(e.target.value.replace(/\D/g,"")),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-500 hover:text-surface-300",children:N?(0,s.jsx)(x,{size:20}):(0,s.jsx)(h,{size:20})})]}),(0,s.jsx)("p",{className:"text-xs text-surface-500 mt-1.5",children:"You'll use this PIN to log back in"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Confirm PIN"}),(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:I,onChange:e=>D(e.target.value.replace(/\D/g,"")),required:!0})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.E.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"⏳"}),"Joining..."]}):(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Join Class ",(0,s.jsx)(p.Z,{size:20})]})})]}):(0,s.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Enter your full name",value:A,onChange:e=>q(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Class Code"}),(0,s.jsx)("input",{type:"text",className:"input uppercase tracking-widest text-center font-mono text-lg",placeholder:"ABC123",maxLength:6,value:B,onChange:e=>z(e.target.value.toUpperCase()),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your PIN"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:N?"text":"password",className:"input text-center text-2xl tracking-[0.5em] font-mono",placeholder:"••••",maxLength:4,value:M,onChange:e=>T(e.target.value.replace(/\D/g,"")),required:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-surface-500 hover:text-surface-300",children:N?(0,s.jsx)(x,{size:20}):(0,s.jsx)(h,{size:20})})]})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?"Logging in...":(0,s.jsxs)("span",{className:"flex items-center gap-2",children:["Welcome Back ",(0,s.jsx)(p.Z,{size:20})]})})]})]},"student"):(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-5",children:[(0,s.jsx)("button",{onClick:()=>g("login"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("login"===f?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"Login"}),(0,s.jsx)("button",{onClick:()=>g("register"),className:"flex-1 py-2.5 text-sm font-medium rounded-xl transition-all ".concat("register"===f?"bg-surface-700 text-surface-100":"text-surface-500 hover:text-surface-300 hover:bg-surface-800"),children:"Register"})]}),(0,s.jsxs)("form",{onSubmit:V,className:"space-y-4",children:["register"===f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Your Name"}),(0,s.jsx)("input",{type:"text",className:"input",placeholder:"Your name",value:H,onChange:e=>X(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"p-4 bg-surface-800/50 rounded-xl border border-surface-700",children:[(0,s.jsx)("p",{className:"font-medium text-surface-300 mb-2 flex items-center gap-2",children:"\uD83D\uDCDA 3 Classes will be created:"}),(0,s.jsxs)("ul",{className:"text-sm text-surface-400 space-y-1",children:[(0,s.jsx)("li",{children:"• Leadership 1st Period"}),(0,s.jsx)("li",{children:"• Leadership 2nd A"}),(0,s.jsx)("li",{children:"• Leadership 2nd B"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"input",placeholder:"your@email.com",value:Z,onChange:e=>Y(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"input",placeholder:"••••••••",value:O,onChange:e=>R(e.target.value),required:!0,minLength:6})]}),(0,s.jsx)(n.E.button,{type:"submit",disabled:y,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn btn-primary w-full py-4 text-lg",children:y?"Please wait...":"register"===f?"Create Account":"Login"})]})]},"teacher")})]}),(0,s.jsxs)(n.E.p,{className:"text-center text-surface-500 text-sm mt-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[(0,s.jsx)("span",{className:"text-primary-400",children:"The 51/49 Principle:"})," Master yourself before leading others."]})]})})]})}},8933:function(e,t,a){"use strict";a.d(t,{e:function(){return i}});var s=a(6614),r=a(257);let l=null;function i(){if(l)return l;let e=r.env.NEXT_PUBLIC_SUPABASE_URL,t=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)throw Error("Missing Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");return l=(0,s.createBrowserClient)(e,t)}}},function(e){e.O(0,[818,971,117,744],function(){return e(e.s=9734)}),_N_E=e.O()}]);