"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{7436:function(e,l,s){s.d(l,{Z:function(){return t}});let t=(0,s(7415).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7674:function(e,l,s){s.r(l),s.d(l,{default:function(){return u}});var t=s(8357),a=s(921),i=s(1374),r=s(6694),n=s(2412),c=s(3836),d=s(7436),o=s(7925);function u(e){let{lesson:l,userId:s,classId:u,onClose:h}=e,[x,m]=(0,a.useState)("intro"),[f,b]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,j]=(0,a.useState)(""),[N,k]=(0,a.useState)(!1),[_,C]=(0,a.useState)(!1),E=(0,o.e)(),S=async()=>{if(f&&p&&y){k(!0);try{await E.from("challenge_submissions").insert({student_id:s,lesson_id:null==l?void 0:l.id,class_id:u,plan_description:f,evidence_description:p,evidence_url:v||null,reflection:y,review_status:"pending"}),await E.from("student_lessons").update({challenge_complete:!0,challenge_at:new Date().toISOString(),status:"completed"}).eq("student_id",s).eq("lesson_id",null==l?void 0:l.id),await E.rpc("increment_tower",{p_student_id:s}),C(!0)}catch(e){console.error("Error submitting challenge:",e)}finally{k(!1)}}};return _?(0,t.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(i.E.div,{initial:{scale:.9},animate:{scale:1},className:"bg-surface-900 rounded-2xl p-8 max-w-md w-full text-center",children:[(0,t.jsx)(i.E.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(r.Z,{className:"text-green-400",size:40})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Challenge Submitted!"}),(0,t.jsx)("p",{className:"text-surface-400 mb-4",children:"Your teacher will review your evidence. You've earned a tower piece for your world! \uD83C\uDFDB️"}),(0,t.jsx)(i.E.button,{onClick:h,className:"px-6 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-xl font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Back to Dashboard"})]})}):(0,t.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(i.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},className:"bg-surface-900 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-surface-800 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.Z,{className:"text-blue-400",size:24}),(0,t.jsx)("h2",{className:"font-semibold text-surface-100",children:"Real-World Challenge"})]}),(0,t.jsx)("button",{onClick:h,className:"text-surface-500 hover:text-surface-300 p-1",children:(0,t.jsx)(c.Z,{size:20})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["intro"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-white mb-2",children:["Prove Your ",null==l?void 0:l.skill_name," Skills"]}),(0,t.jsx)("p",{className:"text-surface-400",children:"Time to take what you've learned and apply it in the real world. This isn't about perfect execution—it's about genuine effort and reflection."})]}),(0,t.jsxs)("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[(0,t.jsx)("h4",{className:"font-semibold text-white mb-2",children:"The Win:"}),(0,t.jsx)("p",{className:"text-surface-300",children:null==l?void 0:l.the_win})]}),(0,t.jsxs)("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[(0,t.jsx)("h4",{className:"font-semibold text-white mb-2",children:"The Obstacle:"}),(0,t.jsx)("p",{className:"text-surface-300",children:null==l?void 0:l.the_obstacle})]}),(0,t.jsx)(i.E.button,{onClick:()=>m("plan"),className:"w-full py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-xl font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:"I'm Ready to Plan My Challenge"})]}),"plan"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Your Plan"}),(0,t.jsxs)("p",{className:"text-surface-400 mb-4",children:["What specifically will you do to demonstrate ",null==l?void 0:l.skill_name,"? Be concrete—include who, what, when, where."]}),(0,t.jsx)("textarea",{className:"w-full h-40 bg-surface-800 border border-surface-700 rounded-xl p-4 text-white placeholder:text-surface-500 focus:border-primary-500 outline-none resize-none",placeholder:"Describe your plan in detail...",value:f,onChange:e=>b(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>m("intro"),className:"flex-1 py-3 bg-surface-800 hover:bg-surface-700 text-white rounded-xl font-medium",children:"Back"}),(0,t.jsx)(i.E.button,{onClick:()=>m("evidence"),disabled:f.length<50,className:"flex-1 py-3 bg-primary-600 hover:bg-primary-500 disabled:bg-surface-700 disabled:text-surface-500 text-white rounded-xl font-medium",whileHover:{scale:f.length>=50?1.02:1},whileTap:{scale:f.length>=50?.98:1},children:"Continue"})]})]}),"evidence"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Your Evidence"}),(0,t.jsx)("p",{className:"text-surface-400 mb-4",children:"Describe what happened when you executed your plan. What worked? What didn't? How did people respond?"}),(0,t.jsx)("textarea",{className:"w-full h-32 bg-surface-800 border border-surface-700 rounded-xl p-4 text-white placeholder:text-surface-500 focus:border-primary-500 outline-none resize-none",placeholder:"What happened when you did it...",value:p,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-surface-300 mb-2",children:"Evidence Link (optional)"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{size:18,className:"text-surface-500"}),(0,t.jsx)("input",{type:"url",className:"flex-1 bg-surface-800 border border-surface-700 rounded-xl px-4 py-2 text-white placeholder:text-surface-500 focus:border-primary-500 outline-none",placeholder:"Link to photo, video, or document...",value:v,onChange:e=>w(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>m("plan"),className:"flex-1 py-3 bg-surface-800 hover:bg-surface-700 text-white rounded-xl font-medium",children:"Back"}),(0,t.jsx)(i.E.button,{onClick:()=>m("submit"),disabled:p.length<50,className:"flex-1 py-3 bg-primary-600 hover:bg-primary-500 disabled:bg-surface-700 disabled:text-surface-500 text-white rounded-xl font-medium",whileHover:{scale:p.length>=50?1.02:1},whileTap:{scale:p.length>=50?.98:1},children:"Continue"})]})]}),"submit"===x&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Your Reflection"}),(0,t.jsxs)("p",{className:"text-surface-400 mb-4",children:["What did this experience teach you about ",null==l?void 0:l.skill_name,"? How might you apply this learning in the future?"]}),(0,t.jsx)("textarea",{className:"w-full h-32 bg-surface-800 border border-surface-700 rounded-xl p-4 text-white placeholder:text-surface-500 focus:border-primary-500 outline-none resize-none",placeholder:"Reflect on what you learned...",value:y,onChange:e=>j(e.target.value)})]}),(0,t.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-400 mb-2",children:"Summary"}),(0,t.jsxs)("div",{className:"text-sm text-surface-300 space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Plan:"})," ",f.slice(0,100),"..."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Evidence:"})," ",p.slice(0,100),"..."]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>m("evidence"),className:"flex-1 py-3 bg-surface-800 hover:bg-surface-700 text-white rounded-xl font-medium",children:"Back"}),(0,t.jsx)(i.E.button,{onClick:S,disabled:y.length<30||N,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 disabled:bg-surface-700 disabled:text-surface-500 text-white rounded-xl font-medium",whileHover:{scale:y.length>=30?1.02:1},whileTap:{scale:y.length>=30?.98:1},children:N?"Submitting...":"Submit Challenge"})]})]})]})]})})}}}]);