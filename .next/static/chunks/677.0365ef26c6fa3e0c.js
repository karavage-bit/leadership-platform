"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{9567:function(e,t,n){let r;n.d(t,{ZJ:function(){return T}});var a=n(2677),o=n(921),i=n(1869),l=n(440);let s=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function c(e,t){let n=(0,l.D)(e=>e.gl),r=(0,l.H)(i.TextureLoader,s(e)?Object.values(e):e);return(0,o.useLayoutEffect)(()=>{null==t||t(r)},[t]),(0,o.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(r)?e=r:r instanceof i.Texture?e=[r]:s(r)&&(e=Object.values(r)),e.forEach(e=>{e instanceof i.Texture&&n.initTexture(e)})}},[n,r]),(0,o.useMemo)(()=>{if(!s(e))return r;{let t={},n=0;for(let a in e)t[a]=r[n++];return t}},[e,r])}c.preload=e=>l.H.preload(i.TextureLoader,e),c.clear=e=>l.H.clear(i.TextureLoader,e);var u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let f=new Uint8Array(16),d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));var m=function(e,t,n){if(u.randomUUID&&!t&&!e)return u.randomUUID();let a=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(f)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]}(a)};let h=(e,t)=>{"updateRanges"in e?e.updateRanges[0]=t:e.updateRange=t},v="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",p=new i.Matrix4,g=new i.Vector3,b=new i.Quaternion,y=new i.Vector3,E=new i.Quaternion,x=new i.Vector3,M=o.createContext(null),w=o.forwardRef(({children:e,material:t=i.MeshLambertMaterial,texture:n=v,range:r,limit:s=200,frustumCulled:u,...f},d)=>{var m,w;let _;let T=o.useMemo(()=>class extends t{constructor(){super();let e=parseInt(i.REVISION.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=t=>{t.vertexShader=`attribute float cloudOpacity;
               varying float vOpacity;
              `+t.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = cloudOpacity;
                `),t.fragmentShader=`varying float vOpacity;
              `+t.fragmentShader.replace(`#include <${e}>`,`#include <${e}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[t]);(0,l.e)({CloudMaterial:T});let A=o.useRef(null),P=o.useRef([]),S=o.useMemo(()=>new Float32Array(Array.from({length:s},()=>1)),[s]),R=o.useMemo(()=>new Float32Array(Array.from({length:s},()=>[1,1,1]).flat()),[s]),O=c(n),k=0,L=0,D=new i.Quaternion,I=new i.Vector3(0,0,1),C=new i.Vector3;(0,l.F)((e,t)=>{for(k=e.clock.getElapsedTime(),p.copy(A.current.matrixWorld).invert(),e.camera.matrixWorld.decompose(y,E,x),L=0;L<P.current.length;L++)(_=P.current[L]).ref.current.matrixWorld.decompose(g,b,x),g.add(C.copy(_.position).applyQuaternion(b).multiply(x)),b.copy(E).multiply(D.setFromAxisAngle(I,_.rotation+=t*_.rotationFactor)),x.multiplyScalar(_.volume+(1+Math.sin(k*_.density*_.speed))/2*_.growth),_.matrix.compose(g,b,x).premultiply(p),_.dist=g.distanceTo(y);for(P.current.sort((e,t)=>t.dist-e.dist),L=0;L<P.current.length;L++)_=P.current[L],S[L]=_.opacity*(_.dist<_.fade-1?_.dist/_.fade:1),A.current.setMatrixAt(L,_.matrix),A.current.setColorAt(L,_.color);A.current.geometry.attributes.cloudOpacity.needsUpdate=!0,A.current.instanceMatrix.needsUpdate=!0,A.current.instanceColor&&(A.current.instanceColor.needsUpdate=!0)}),o.useLayoutEffect(()=>{let e=Math.min(s,void 0!==r?r:s,P.current.length);A.current.count=e,h(A.current.instanceMatrix,{offset:0,count:16*e}),A.current.instanceColor&&h(A.current.instanceColor,{offset:0,count:3*e}),h(A.current.geometry.attributes.cloudOpacity,{offset:0,count:e})});let j=[null!==(m=O.image.width)&&void 0!==m?m:1,null!==(w=O.image.height)&&void 0!==w?w:1],U=Math.max(j[0],j[1]);return j=[j[0]/U,j[1]/U],o.createElement("group",(0,a.Z)({ref:d},f),o.createElement(M.Provider,{value:P},e,o.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:A,args:[null,null,s],frustumCulled:u},o.createElement("instancedBufferAttribute",{usage:i.DynamicDrawUsage,attach:"instanceColor",args:[R,3]}),o.createElement("planeGeometry",{args:[...j]},o.createElement("instancedBufferAttribute",{usage:i.DynamicDrawUsage,attach:"attributes-cloudOpacity",args:[S,1]})),o.createElement("cloudMaterial",{key:t.name,map:O,transparent:!0,depthWrite:!1}))))}),_=o.forwardRef(({opacity:e=1,speed:t=0,bounds:n=[5,1,1],segments:r=20,color:s="#ffffff",fade:c=10,volume:u=6,smallestVolume:f=.25,distribute:d=null,growth:h=4,concentrate:v="inside",seed:p=Math.random(),...g},b)=>{function y(){let e=1e4*Math.sin(p++);return e-Math.floor(e)}let E=o.useContext(M),x=o.useRef(null),[w]=o.useState(()=>m()),_=o.useMemo(()=>[...Array(r)].map((e,t)=>({segments:r,bounds:new i.Vector3(1,1,1),position:new i.Vector3,uuid:w,index:t,ref:x,dist:0,matrix:new i.Matrix4,color:new i.Color,rotation:Math.PI/r*t})),[r,w]);return o.useLayoutEffect(()=>{_.forEach((a,o)=>{(0,l.k)(a,{volume:u,color:s,speed:t,growth:h,opacity:e,fade:c,bounds:n,density:Math.max(.5,y()),rotationFactor:Math.max(.2,.5*y())*t});let i=null==d?void 0:d(a,o);if(i||r>1){var m;a.position.copy(a.bounds).multiply(null!==(m=null==i?void 0:i.point)&&void 0!==m?m:{x:2*y()-1,y:2*y()-1,z:2*y()-1})}let p=Math.abs(a.position.x),g=Math.abs(a.position.y),b=Math.abs(a.position.z),E=Math.max(p,g,b);a.length=1,p===E&&(a.length-=p/a.bounds.x),g===E&&(a.length-=g/a.bounds.y),b===E&&(a.length-=b/a.bounds.z),a.volume=((null==i?void 0:i.volume)!==void 0?i.volume:Math.max(Math.max(0,f),"random"===v?y():"inside"===v?a.length:1-a.length))*u})},[v,n,c,s,e,h,u,p,r,t]),o.useLayoutEffect(()=>(E.current=[...E.current,..._],()=>{E.current=E.current.filter(e=>e.uuid!==w)}),[_]),o.useImperativeHandle(b,()=>x.current,[]),o.createElement("group",(0,a.Z)({ref:x},g))}),T=o.forwardRef((e,t)=>o.useContext(M)?o.createElement(_,(0,a.Z)({ref:t},e)):o.createElement(w,null,o.createElement(_,(0,a.Z)({ref:t},e))))},7968:function(e,t,n){n.d(t,{z:function(){return y}});var r=n(2677),a=n(440),o=n(921),i=n(1869),l=Object.defineProperty,s=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);class u{constructor(){c(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var f=Object.defineProperty,d=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t,n)=>(d(e,"symbol"!=typeof t?t+"":t,n),n);let h=new i.Ray,v=new i.Plane,p=Math.cos(Math.PI/180*70),g=(e,t)=>(e%t+t)%t;class b extends u{constructor(e,t){super(),m(this,"object"),m(this,"domElement"),m(this,"enabled",!0),m(this,"target",new i.Vector3),m(this,"minDistance",0),m(this,"maxDistance",1/0),m(this,"minZoom",0),m(this,"maxZoom",1/0),m(this,"minPolarAngle",0),m(this,"maxPolarAngle",Math.PI),m(this,"minAzimuthAngle",-1/0),m(this,"maxAzimuthAngle",1/0),m(this,"enableDamping",!1),m(this,"dampingFactor",.05),m(this,"enableZoom",!0),m(this,"zoomSpeed",1),m(this,"enableRotate",!0),m(this,"rotateSpeed",1),m(this,"enablePan",!0),m(this,"panSpeed",1),m(this,"screenSpacePanning",!0),m(this,"keyPanSpeed",7),m(this,"zoomToCursor",!1),m(this,"autoRotate",!1),m(this,"autoRotateSpeed",2),m(this,"reverseOrbit",!1),m(this,"reverseHorizontalOrbit",!1),m(this,"reverseVerticalOrbit",!1),m(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),m(this,"mouseButtons",{LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN}),m(this,"touches",{ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN}),m(this,"target0"),m(this,"position0"),m(this,"zoom0"),m(this,"_domElementKeyEvents",null),m(this,"getPolarAngle"),m(this,"getAzimuthalAngle"),m(this,"setPolarAngle"),m(this,"setAzimuthalAngle"),m(this,"getDistance"),m(this,"getZoomScale"),m(this,"listenToKeyEvents"),m(this,"stopListenToKeyEvents"),m(this,"saveState"),m(this,"reset"),m(this,"update"),m(this,"connect"),m(this,"dispose"),m(this,"dollyIn"),m(this,"dollyOut"),m(this,"getScale"),m(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=e=>{let t=g(e,2*Math.PI),r=u.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-r);2*Math.PI-a<a&&(t<r?t+=2*Math.PI:r+=2*Math.PI),f.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=g(e,2*Math.PI),r=u.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let a=Math.abs(t-r);2*Math.PI-a<a&&(t<r?t+=2*Math.PI:r+=2*Math.PI),f.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",ee),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ee),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=l.NONE},this.update=(()=>{let t=new i.Vector3,a=new i.Vector3(0,1,0),o=new i.Quaternion().setFromUnitVectors(e.up,a),m=o.clone().invert(),g=new i.Vector3,y=new i.Quaternion,E=2*Math.PI;return function(){let x=n.object.position;o.setFromUnitVectors(e.up,a),m.copy(o).invert(),t.copy(x).sub(n.target),t.applyQuaternion(o),u.setFromVector3(t),n.autoRotate&&s===l.NONE&&I(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=f.theta*n.dampingFactor,u.phi+=f.phi*n.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let M=n.minAzimuthAngle,w=n.maxAzimuthAngle;isFinite(M)&&isFinite(w)&&(M<-Math.PI?M+=E:M>Math.PI&&(M-=E),w<-Math.PI?w+=E:w>Math.PI&&(w-=E),M<=w?u.theta=Math.max(M,Math.min(w,u.theta)):u.theta=u.theta>(M+w)/2?Math.max(M,u.theta):Math.min(w,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&O||n.object.isOrthographicCamera?u.radius=V(u.radius):u.radius=V(u.radius*d),t.setFromSpherical(u),t.applyQuaternion(m),x.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),b.set(0,0,0));let _=!1;if(n.zoomToCursor&&O){let r=null;if(n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera){let e=t.length();r=V(e*d);let a=e-r;n.object.position.addScaledVector(S,a),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let e=new i.Vector3(R.x,R.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),_=!0;let a=new i.Vector3(R.x,R.y,0);a.unproject(n.object),n.object.position.sub(a).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(h.origin.copy(n.object.position),h.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(h.direction))<p?e.lookAt(n.target):(v.setFromNormalAndCoplanarPoint(n.object.up,n.target),h.intersectPlane(v,n.target))))}else n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera&&(_=1!==d)&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix());return d=1,O=!1,!!(_||g.distanceToSquared(n.object.position)>c||8*(1-y.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),g.copy(n.object.position),y.copy(n.object.quaternion),_=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",et),n.domElement.addEventListener("pointerdown",Z),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",J)},this.dispose=()=>{var e,t,r,a,o,i;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",et),null==(t=n.domElement)||t.removeEventListener("pointerdown",Z),null==(r=n.domElement)||r.removeEventListener("pointercancel",Q),null==(a=n.domElement)||a.removeEventListener("wheel",J),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",K),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",ee)};let n=this,r={type:"change"},a={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=l.NONE,c=1e-6,u=new i.Spherical,f=new i.Spherical,d=1,b=new i.Vector3,y=new i.Vector2,E=new i.Vector2,x=new i.Vector2,M=new i.Vector2,w=new i.Vector2,_=new i.Vector2,T=new i.Vector2,A=new i.Vector2,P=new i.Vector2,S=new i.Vector3,R=new i.Vector2,O=!1,k=[],L={};function D(){return Math.pow(.95,n.zoomSpeed)}function I(e){n.reverseOrbit||n.reverseHorizontalOrbit?f.theta+=e:f.theta-=e}function C(e){n.reverseOrbit||n.reverseVerticalOrbit?f.phi+=e:f.phi-=e}let j=(()=>{let e=new i.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),b.add(e)}})(),U=(()=>{let e=new i.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),b.add(e)}})(),N=(()=>{let e=new i.Vector3;return function(t,r){let a=n.domElement;if(a&&n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera){let o=n.object.position;e.copy(o).sub(n.target);let i=e.length();j(2*t*(i*=Math.tan(n.object.fov/2*Math.PI/180))/a.clientHeight,n.object.matrix),U(2*r*i/a.clientHeight,n.object.matrix)}else a&&n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera?(j(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),U(r*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function F(e){n.object instanceof i.PerspectiveCamera&&n.object.isPerspectiveCamera||n.object instanceof i.OrthographicCamera&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e){if(!n.zoomToCursor||!n.domElement)return;O=!0;let t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top,o=t.width,i=t.height;R.x=r/o*2-1,R.y=-(a/i*2)+1,S.set(R.x,R.y,1).unproject(n.object).sub(n.object.position).normalize()}function V(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function B(e){y.set(e.clientX,e.clientY)}function W(e){M.set(e.clientX,e.clientY)}function G(){if(1==k.length)y.set(k[0].pageX,k[0].pageY);else{let e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);y.set(e,t)}}function $(){if(1==k.length)M.set(k[0].pageX,k[0].pageY);else{let e=.5*(k[0].pageX+k[1].pageX),t=.5*(k[0].pageY+k[1].pageY);M.set(e,t)}}function Y(){let e=k[0].pageX-k[1].pageX,t=k[0].pageY-k[1].pageY;T.set(0,Math.sqrt(e*e+t*t))}function H(e){if(1==k.length)E.set(e.pageX,e.pageY);else{let t=er(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);E.set(n,r)}x.subVectors(E,y).multiplyScalar(n.rotateSpeed);let t=n.domElement;t&&(I(2*Math.PI*x.x/t.clientHeight),C(2*Math.PI*x.y/t.clientHeight)),y.copy(E)}function X(e){if(1==k.length)w.set(e.pageX,e.pageY);else{let t=er(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);w.set(n,r)}_.subVectors(w,M).multiplyScalar(n.panSpeed),N(_.x,_.y),M.copy(w)}function q(e){var t;let r=er(e),a=e.pageX-r.x,o=e.pageY-r.y;A.set(0,Math.sqrt(a*a+o*o)),P.set(0,Math.pow(A.y/T.y,n.zoomSpeed)),t=P.y,F(d/t),T.copy(A)}function Z(e){var t,r;!1!==n.enabled&&(0===k.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",K),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Q)),k.push(e),"touch"===e.pointerType?function(e){switch(en(e),k.length){case 1:switch(n.touches.ONE){case i.TOUCH.ROTATE:if(!1===n.enableRotate)return;G(),s=l.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===n.enablePan)return;$(),s=l.TOUCH_PAN;break;default:s=l.NONE}break;case 2:switch(n.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Y(),n.enablePan&&$(),s=l.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Y(),n.enableRotate&&G(),s=l.TOUCH_DOLLY_ROTATE;break;default:s=l.NONE}break;default:s=l.NONE}s!==l.NONE&&n.dispatchEvent(a)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.MOUSE.DOLLY:if(!1===n.enableZoom)return;z(e),T.set(e.clientX,e.clientY),s=l.DOLLY;break;case i.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;W(e),s=l.PAN}else{if(!1===n.enableRotate)return;B(e),s=l.ROTATE}break;case i.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;B(e),s=l.ROTATE}else{if(!1===n.enablePan)return;W(e),s=l.PAN}break;default:s=l.NONE}s!==l.NONE&&n.dispatchEvent(a)}(e))}function K(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(en(e),s){case l.TOUCH_ROTATE:if(!1===n.enableRotate)return;H(e),n.update();break;case l.TOUCH_PAN:if(!1===n.enablePan)return;X(e),n.update();break;case l.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&q(e),n.enablePan&&X(e),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&q(e),n.enableRotate&&H(e),n.update();break;default:s=l.NONE}}(e):function(e){if(!1!==n.enabled)switch(s){case l.ROTATE:if(!1===n.enableRotate)return;!function(e){E.set(e.clientX,e.clientY),x.subVectors(E,y).multiplyScalar(n.rotateSpeed);let t=n.domElement;t&&(I(2*Math.PI*x.x/t.clientHeight),C(2*Math.PI*x.y/t.clientHeight)),y.copy(E),n.update()}(e);break;case l.DOLLY:var t,r;if(!1===n.enableZoom)return;(A.set(e.clientX,e.clientY),P.subVectors(A,T),P.y>0)?(t=D(),F(d/t)):P.y<0&&(r=D(),F(d*r)),T.copy(A),n.update();break;case l.PAN:if(!1===n.enablePan)return;w.set(e.clientX,e.clientY),_.subVectors(w,M).multiplyScalar(n.panSpeed),N(_.x,_.y),M.copy(w),n.update()}}(e))}function Q(e){var t,r,a;(function(e){delete L[e.pointerId];for(let t=0;t<k.length;t++)if(k[t].pointerId==e.pointerId){k.splice(t,1);return}})(e),0===k.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",K),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",Q)),n.dispatchEvent(o),s=l.NONE}function J(e){if(!1!==n.enabled&&!1!==n.enableZoom&&(s===l.NONE||s===l.ROTATE)){var t,r;e.preventDefault(),n.dispatchEvent(a),(z(e),e.deltaY<0)?(t=D(),F(d*t)):e.deltaY>0&&(r=D(),F(d/r)),n.update(),n.dispatchEvent(o)}}function ee(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:N(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:N(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:N(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function et(e){!1!==n.enabled&&e.preventDefault()}function en(e){let t=L[e.pointerId];void 0===t&&(t=new i.Vector2,L[e.pointerId]=t),t.set(e.pageX,e.pageY)}function er(e){return L[(e.pointerId===k[0].pointerId?k[1]:k[0]).pointerId]}this.dollyIn=(e=D())=>{F(d*e),n.update()},this.dollyOut=(e=D())=>{F(d/e),n.update()},this.getScale=()=>d,this.setScale=e=>{F(e),n.update()},this.getZoomScale=()=>D(),void 0!==t&&this.connect(t),this.update()}}let y=o.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:i,enableDamping:l=!0,keyEvents:s=!1,onChange:c,onStart:u,onEnd:f,...d},m)=>{let h=(0,a.D)(e=>e.invalidate),v=(0,a.D)(e=>e.camera),p=(0,a.D)(e=>e.gl),g=(0,a.D)(e=>e.events),y=(0,a.D)(e=>e.setEvents),E=(0,a.D)(e=>e.set),x=(0,a.D)(e=>e.get),M=(0,a.D)(e=>e.performance),w=t||v,_=i||g.connected||p.domElement,T=o.useMemo(()=>new b(w),[w]);return(0,a.F)(()=>{T.enabled&&T.update()},-1),o.useEffect(()=>(s&&T.connect(!0===s?_:s),T.connect(_),()=>void T.dispose()),[s,_,n,T,h]),o.useEffect(()=>{let e=e=>{h(),n&&M.regress(),c&&c(e)},t=e=>{u&&u(e)},r=e=>{f&&f(e)};return T.addEventListener("change",e),T.addEventListener("start",t),T.addEventListener("end",r),()=>{T.removeEventListener("start",t),T.removeEventListener("end",r),T.removeEventListener("change",e)}},[c,u,f,T,h,y]),o.useEffect(()=>{if(e){let e=x().controls;return E({controls:T}),()=>E({controls:e})}},[e,T]),o.createElement("primitive",(0,r.Z)({ref:m,object:T,enableDamping:l},d))})},7639:function(e,t,n){n.d(t,{q:function(){return d}});var r=n(2677),a=n(921),o=n(1869),i=n(3400),l=Object.defineProperty,s=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);let u=(()=>{let e={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new o.Vector3},up:{value:new o.Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${i.i>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},t=new o.ShaderMaterial({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:o.UniformsUtils.clone(e.uniforms),side:o.BackSide,depthWrite:!1});class n extends o.Mesh{constructor(){super(new o.BoxGeometry(1,1,1),t)}}return c(n,"SkyShader",e),c(n,"material",t),n})();function f(e,t,n=new o.Vector3){let r=2*Math.PI*(t-.5);return n.x=Math.cos(r),n.y=Math.sin(Math.PI*(e-.5)),n.z=Math.sin(r),n}let d=a.forwardRef(({inclination:e=.6,azimuth:t=.1,distance:n=1e3,mieCoefficient:i=.005,mieDirectionalG:l=.8,rayleigh:s=.5,turbidity:c=10,sunPosition:d=f(e,t),...m},h)=>{let v=a.useMemo(()=>new o.Vector3().setScalar(n),[n]),[p]=a.useState(()=>new u);return a.createElement("primitive",(0,r.Z)({object:p,ref:h,"material-uniforms-mieCoefficient-value":i,"material-uniforms-mieDirectionalG-value":l,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":d,"material-uniforms-turbidity-value":c,scale:v},m))})},687:function(e,t,n){n.d(t,{P:function(){return h}});var r=n(2677),a=n(921),o=n(1869),i=n(440),l=n(9698);let s=function(e,t,n,r){let a=class extends o.ShaderMaterial{constructor(r={}){let a=Object.entries(e);super({uniforms:a.reduce((e,[t,n])=>{let r=o.UniformsUtils.clone({[t]:{value:n}});return{...e,...r}},{}),vertexShader:t,fragmentShader:n}),this.key="",a.forEach(([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})),Object.assign(this,r)}};return a.key=o.MathUtils.generateUUID(),a}({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${l.i>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),c=e=>e&&e.constructor===Float32Array,u=e=>[e.r,e.g,e.b],f=e=>e instanceof o.Vector2||e instanceof o.Vector3||e instanceof o.Vector4,d=e=>Array.isArray(e)?e:f(e)?e.toArray():[e,e,e];function m(e,t,n){return a.useMemo(()=>{if(void 0!==t){if(c(t))return t;if(t instanceof o.Color){let n=Array.from({length:3*e},()=>u(t)).flat();return Float32Array.from(n)}if(f(t)||Array.isArray(t)){let n=Array.from({length:3*e},()=>d(t)).flat();return Float32Array.from(n)}return Float32Array.from({length:e},()=>t)}return Float32Array.from({length:e},n)},[t])}let h=a.forwardRef(({noise:e=1,count:t=100,speed:n=1,opacity:l=1,scale:u=1,size:f,color:h,children:v,...p},g)=>{a.useMemo(()=>(0,i.e)({SparklesImplMaterial:s}),[]);let b=a.useRef(null),y=(0,i.D)(e=>e.viewport.dpr),E=d(u),x=a.useMemo(()=>Float32Array.from(Array.from({length:t},()=>E.map(o.MathUtils.randFloatSpread)).flat()),[t,...E]),M=m(t,f,Math.random),w=m(t,l),_=m(t,n),T=m(3*t,e),A=m(void 0===h?3*t:t,c(h)?h:new o.Color(h),()=>1);return(0,i.F)(e=>{b.current&&b.current.material&&(b.current.material.time=e.clock.elapsedTime)}),a.useImperativeHandle(g,()=>b.current,[]),a.createElement("points",(0,r.Z)({key:`particle-${t}-${JSON.stringify(u)}`},p,{ref:b}),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",args:[x,3]}),a.createElement("bufferAttribute",{attach:"attributes-size",args:[M,1]}),a.createElement("bufferAttribute",{attach:"attributes-opacity",args:[w,1]}),a.createElement("bufferAttribute",{attach:"attributes-speed",args:[_,1]}),a.createElement("bufferAttribute",{attach:"attributes-color",args:[A,3]}),a.createElement("bufferAttribute",{attach:"attributes-noise",args:[T,3]})),v||a.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:y,depthWrite:!1}))})},1271:function(e,t,n){n.d(t,{x:function(){return s}});var r=n(2677),a=n(921),o=n(117),i=n(440),l=n(1617);let s=a.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:s,fontSize:c=1,children:u,characters:f,onSync:d,...m},h)=>{let v=(0,i.D)(({invalidate:e})=>e),[p]=a.useState(()=>new o.xv),[g,b]=a.useMemo(()=>{let e=[],t="";return a.Children.forEach(u,n=>{"string"==typeof n||"number"==typeof n?t+=n:e.push(n)}),[e,t]},[u]);return(0,l.Rq)(()=>new Promise(e=>(0,o.C5)({font:s,characters:f},e)),["troika-text",s,f]),a.useLayoutEffect(()=>void p.sync(()=>{v(),d&&d(p)})),a.useEffect(()=>()=>p.dispose(),[p]),a.createElement("primitive",(0,r.Z)({object:p,ref:h,font:s,text:b,anchorX:t,anchorY:n,fontSize:c,sdfGlyphSize:e},m),g)})},3689:function(e,t,n){let r,a;n.d(t,{V:function(){return y}});var o=n(2677),i=n(921),l=n(2390),s=n(1869),c=n(440);let u=new s.Vector3,f=new s.Vector3,d=new s.Vector3,m=new s.Vector2;function h(e,t,n){let r=u.setFromMatrixPosition(e.matrixWorld);r.project(t);let a=n.width/2,o=n.height/2;return[r.x*a+a,-(r.y*o)+o]}let v=e=>1e-10>Math.abs(e)?0:e;function p(e,t,n=""){let r="matrix3d(";for(let n=0;16!==n;n++)r+=v(t[n]*e.elements[n])+(15!==n?",":")");return n+r}let g=(r=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>p(e,r)),b=(a=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,t)=>p(e,a(t),"translate(-50%,-50%)")),y=i.forwardRef(({children:e,eps:t=.001,style:n,className:r,prepend:a,center:p,fullscreen:y,portal:E,distanceFactor:x,sprite:M=!1,transform:w=!1,occlude:_,onOcclude:T,castShadow:A,receiveShadow:P,material:S,geometry:R,zIndexRange:O=[16777271,0],calculatePosition:k=h,as:L="div",wrapperClass:D,pointerEvents:I="auto",...C},j)=>{let{gl:U,camera:N,scene:F,size:z,raycaster:V,events:B,viewport:W}=(0,c.D)(),[G]=i.useState(()=>document.createElement(L)),$=i.useRef(),Y=i.useRef(null),H=i.useRef(0),X=i.useRef([0,0]),q=i.useRef(null),Z=i.useRef(null),K=(null==E?void 0:E.current)||B.connected||U.domElement.parentNode,Q=i.useRef(null),J=i.useRef(!1),ee=i.useMemo(()=>{var e;return _&&"blending"!==_||Array.isArray(_)&&_.length&&(e=_[0])&&"object"==typeof e&&"current"in e},[_]);i.useLayoutEffect(()=>{let e=U.domElement;_&&"blending"===_?(e.style.zIndex=`${Math.floor(O[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[_]),i.useLayoutEffect(()=>{if(Y.current){let e=$.current=l.createRoot(G);if(F.updateMatrixWorld(),w)G.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=k(Y.current,N,z);G.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return K&&(a?K.prepend(G):K.appendChild(G)),()=>{K&&K.removeChild(G),e.unmount()}}},[K,w]),i.useLayoutEffect(()=>{D&&(G.className=D)},[D]);let et=i.useMemo(()=>w?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none",...y&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...n},[n,p,y,z,w]),en=i.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);i.useLayoutEffect(()=>{var t,a;J.current=!1,w?null==(t=$.current)||t.render(i.createElement("div",{ref:q,style:et},i.createElement("div",{ref:Z,style:en},i.createElement("div",{ref:j,className:r,style:n,children:e})))):null==(a=$.current)||a.render(i.createElement("div",{ref:j,style:et,className:r,children:e}))});let er=i.useRef(!0);(0,c.F)(e=>{if(Y.current){N.updateMatrixWorld(),Y.current.updateWorldMatrix(!0,!1);let e=w?X.current:k(Y.current,N,z);if(w||Math.abs(H.current-N.zoom)>t||Math.abs(X.current[0]-e[0])>t||Math.abs(X.current[1]-e[1])>t){let t=function(e,t){let n=u.setFromMatrixPosition(e.matrixWorld),r=f.setFromMatrixPosition(t.matrixWorld),a=n.sub(r),o=t.getWorldDirection(d);return a.angleTo(o)>Math.PI/2}(Y.current,N),n=!1;ee&&(Array.isArray(_)?n=_.map(e=>e.current):"blending"!==_&&(n=[F]));let r=er.current;if(n){let e=function(e,t,n,r){let a=u.setFromMatrixPosition(e.matrixWorld),o=a.clone();o.project(t),m.set(o.x,o.y),n.setFromCamera(m,t);let i=n.intersectObjects(r,!0);if(i.length){let e=i[0].distance;return a.distanceTo(n.ray.origin)<e}return!0}(Y.current,N,V,n);er.current=e&&!t}else er.current=!t;r!==er.current&&(T?T(!er.current):G.style.display=er.current?"block":"none");let a=Math.floor(O[0]/2),o=_?ee?[O[0],a]:[a-1,0]:O;if(G.style.zIndex=`${function(e,t,n){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){let r=u.setFromMatrixPosition(e.matrixWorld),a=f.setFromMatrixPosition(t.matrixWorld),o=r.distanceTo(a),i=(n[1]-n[0])/(t.far-t.near),l=n[1]-i*t.far;return Math.round(i*o+l)}}(Y.current,N,o)}`,w){let[e,t]=[z.width/2,z.height/2],n=N.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:a,left:o,bottom:i,right:l}=N,s=g(N.matrixWorldInverse),c=r?`scale(${n})translate(${v(-(l+o)/2)}px,${v((a+i)/2)}px)`:`translateZ(${n}px)`,u=Y.current.matrixWorld;M&&((u=N.matrixWorldInverse.clone().transpose().copyPosition(u).scale(Y.current.scale)).elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),G.style.width=z.width+"px",G.style.height=z.height+"px",G.style.perspective=r?"":`${n}px`,q.current&&Z.current&&(q.current.style.transform=`${c}${s}translate(${e}px,${t}px)`,Z.current.style.transform=b(u,1/((x||10)/400)))}else{let t=void 0===x?1:function(e,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(!(t instanceof s.PerspectiveCamera))return 1;{let n=u.setFromMatrixPosition(e.matrixWorld),r=f.setFromMatrixPosition(t.matrixWorld);return 1/(2*Math.tan(t.fov*Math.PI/180/2)*n.distanceTo(r))}}(Y.current,N)*x;G.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}X.current=e,H.current=N.zoom}}if(!ee&&Q.current&&!J.current){if(w){if(q.current){let e=q.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:t}=N;if(t||R)C.scale&&(Array.isArray(C.scale)?C.scale instanceof s.Vector3?Q.current.scale.copy(C.scale.clone().divideScalar(1)):Q.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):Q.current.scale.setScalar(1/C.scale));else{let t=(x||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;Q.current.scale.set(n,r,1)}J.current=!0}}}else{let t=G.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let e=1/W.factor,n=t.clientWidth*e,r=t.clientHeight*e;Q.current.scale.set(n,r,1),J.current=!0}Q.current.lookAt(e.camera.position)}}});let ea=i.useMemo(()=>({vertexShader:w?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[w]);return i.createElement("group",(0,o.Z)({},C,{ref:Y}),_&&!ee&&i.createElement("mesh",{castShadow:A,receiveShadow:P,ref:Q},R||i.createElement("planeGeometry",null),S||i.createElement("shaderMaterial",{side:s.DoubleSide,vertexShader:ea.vertexShader,fragmentShader:ea.fragmentShader})))})},1418:function(e,t,n){n.d(t,{c:function(){return f},Z:function(){return d}});var r=n(921);let a=e=>{let t;let n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,a,o);return o},o=e=>e?a(e):a,i=e=>e,l=e=>{let t=o(e),n=e=>(function(e,t=i){let n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},s=e=>e?l(e):l,c=e=>(t,n,r)=>{let a=r.subscribe;return r.subscribe=(e,t,n)=>{let o=e;if(t){let a=(null==n?void 0:n.equalityFn)||Object.is,i=e(r.getState());o=n=>{let r=e(n);if(!a(i,r)){let e=i;t(i=r,e)}},(null==n?void 0:n.fireImmediately)&&t(i,i)}return a(o)},e(t,n,r)},u=r.createContext(null);function f({map:e,children:t,onChange:n,domElement:a}){let o=e.map(e=>e.name+e.keys).join("-"),i=r.useMemo(()=>s(c(()=>e.reduce((e,t)=>({...e,[t.name]:!1}),{}))),[o]),l=r.useMemo(()=>[i.subscribe,i.getState,i],[o]),f=i.setState;return r.useEffect(()=>{let t=e.map(({name:e,keys:t,up:r})=>({keys:t,up:r,fn:t=>{f({[e]:t}),n&&n(e,t,l[1]())}})).reduce((e,{keys:t,fn:n,up:r=!0})=>(t.forEach(t=>e[t]={fn:n,pressed:!1,up:r}),e),{}),r=({key:e,code:n})=>{let r=t[e]||t[n];if(!r)return;let{fn:a,pressed:o,up:i}=r;r.pressed=!0,(i||!o)&&a(!0)},o=({key:e,code:n})=>{let r=t[e]||t[n];if(!r)return;let{fn:a,up:o}=r;r.pressed=!1,o&&a(!1)},i=a||window;return i.addEventListener("keydown",r,{passive:!0}),i.addEventListener("keyup",o,{passive:!0}),()=>{i.removeEventListener("keydown",r),i.removeEventListener("keyup",o)}},[a,o]),r.createElement(u.Provider,{value:l,children:t})}function d(e){let[t,n,a]=r.useContext(u);return e?a(e):[t,n]}},666:function(e,t,n){n.d(t,{B$:function(){return function e(t,n){let a=function(e){let t=JSON.stringify(e,m),n=v.get(t);return null==n&&v.set(t,n=++h),n}(n),p=c.get(t);if(p||c.set(t,p=Object.create(null)),p[a])return new p[a];let g=`_onBeforeCompile${a}`,b=function(e,r){t.onBeforeCompile.call(this,e,r);let i=this.customProgramCacheKey()+"|"+e.vertexShader+"|"+e.fragmentShader,c=u[i];if(!c){let t=function(e,{vertexShader:t,fragmentShader:n},r,a){let{vertexDefs:i,vertexMainIntro:l,vertexMainOutro:s,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:f,fragmentMainOutro:m,fragmentColorTransform:h,customRewriter:v,timeUniform:p}=r;if(i=i||"",l=l||"",s=s||"",u=u||"",f=f||"",m=m||"",(c||v)&&(t=o(t)),(h||v)&&(n=o(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),v){let e=v({vertexShader:t,fragmentShader:n});t=e.vertexShader,n=e.fragmentShader}if(h){let e=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,t=>(e.push(t),"")),m=`${h}
${e.join("\n")}
${m}`}if(p){let e=`
uniform float ${p};
`;i=e+i,u=e+u}return c&&(t=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${t}
`,i=`${i}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,l=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${l}
`,t=t.replace(/\b(position|normal|uv)\b/g,(e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:`troika_${t}_${a}`),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),{vertexShader:t=d(t,a,i,l,s),fragmentShader:n=d(n,a,u,f,m)}}(this,e,n,a);c=u[i]=t}e.vertexShader=c.vertexShader,e.fragmentShader=c.fragmentShader,l(e.uniforms,this.uniforms),n.timeUniform&&(e.uniforms[n.timeUniform]={get value(){return Date.now()-s}}),this[g]&&this[g](e)},y=function(){return E(n.chained?t:t.clone())},E=function(e){let r=Object.create(e,x);return Object.defineProperty(r,"baseMaterial",{value:t}),Object.defineProperty(r,"id",{value:f++}),r.uuid=function(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]).toUpperCase()}(),r.uniforms=l({},e.uniforms,n.uniforms),r.defines=l({},e.defines,n.defines),r.defines[`TROIKA_DERIVED_MATERIAL_${a}`]="",r.extensions=l({},e.extensions,n.extensions),r._listeners=void 0,r},x={constructor:{value:y},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:e=>{t.type=e}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){let t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+a}},onBeforeCompile:{get:()=>b,set(e){this[g]=e}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),t.isShaderMaterial||t.isDerivedMaterial||(l(this.extensions,e.extensions),l(this.defines,e.defines),l(this.uniforms,r.UniformsUtils.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){return E(new t.constructor).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let a=this._depthMaterial;return a||((a=this._depthMaterial=e(t.isDerivedMaterial?t.getDepthMaterial():new r.MeshDepthMaterial({depthPacking:r.RGBADepthPacking}),n)).defines.IS_DEPTH_MATERIAL="",a.uniforms=this.uniforms),a}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let a=this._distanceMaterial;return a||((a=this._distanceMaterial=e(t.isDerivedMaterial?t.getDistanceMaterial():new r.MeshDistanceMaterial,n)).defines.IS_DISTANCE_MATERIAL="",a.uniforms=this.uniforms),a}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:e,_distanceMaterial:n}=this;e&&e.dispose(),n&&n.dispose(),t.dispose.call(this)}}};return p[a]=y,new y}},MW:function(){return a}});var r=n(1869);let a=/\bvoid\s+main\s*\(\s*\)\s*{/g;function o(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){let n=r.ShaderChunk[t];return n?o(n):e})}let i=[];for(let e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16);let l=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s=Date.now(),c=new WeakMap,u=new Map,f=1e10;function d(e,t,n,r,o){return(r||o||n)&&(e=e.replace(a,`
${n}
void troikaOrigMain${t}() {`)+`
void main() {
  ${r}
  troikaOrigMain${t}();
  ${o}
}`),e}function m(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let h=0,v=new Map;r.DoubleSide},9811:function(e,t,n){function r(){var e=Object.create(null);function t(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){console.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",function(n){var r=n.data,a=r.messageId,o=r.action,i=r.data;try{"registerModule"===o&&function n(r,a){var o=r.id,i=r.name,l=r.dependencies;void 0===l&&(l=[]);var s=r.init;void 0===s&&(s=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{l=l.map(function(t){return t&&t.isWorkerModule&&(n(t,function(e){if(e instanceof Error)throw e}),t=e[t.id].value),t}),s=t("<"+i+">.init",s),c&&(c=t("<"+i+">.getTransferables",c));var u=null;"function"==typeof s?u=s.apply(void 0,l):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},a(u)}catch(e){e&&e.noLog||console.error(e),a(e)}}(i,function(e){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:{isCallable:"function"==typeof e}})}),"callModule"===o&&function(t,n){var r,a=t.id,o=t.args;e[a]&&"function"==typeof e[a].value||n(Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var i=(r=e[a]).value.apply(r,o);i&&"function"==typeof i.then?i.then(l,function(e){return n(e instanceof Error?e:Error(""+e))}):l(i)}catch(e){n(e)}function l(t){try{var r=e[a].getTransferables&&e[a].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){console.error(e),n(e)}}}(i,function(e,t){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:e},t||void 0)})}catch(e){postMessage({messageId:a,success:!1,error:e.stack})}})}n.d(t,{Ae:function(){return f},Ch:function(){return function e(t){if((!t||"function"!=typeof t.init)&&!l)throw Error("requires `options.init` function");var n,r=t.dependencies,i=t.init,s=t.getTransferables,u=t.workerId,f=((n=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return n._getInitResult().then(function(t){if("function"==typeof t)return t.apply(void 0,e);throw Error("Worker module function was called but `init` did not return a callable function")})})._getInitResult=function(){var e=t.dependencies,r=t.init,a=Promise.all(e=Array.isArray(e)?e.map(function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e}):[]).then(function(e){return r.apply(null,e)});return n._getInitResult=function(){return a},a},n);null==u&&(u="#default");var h="workerModule"+ ++o,v=t.name||h,p=null;function g(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!a())return f.apply(void 0,e);if(!p){p=m(u,"registerModule",g.workerModuleData);var n=function(){p=null,c[u].delete(n)};(c[u]||(c[u]=new Set)).add(n)}return p.then(function(t){if(t.isCallable)return m(u,"callModule",{id:h,args:e});throw Error("Worker module function was called but `init` did not return a callable function")})}return r=r&&r.map(function(t){return"function"!=typeof t||t.workerModuleData||(l=!0,t=e({workerId:u,name:"<"+v+"> function dependency: "+t.name,init:"function(){return (\n"+d(t)+"\n)}"}),l=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t}),g.workerModuleData={isWorkerModule:!0,id:h,name:v,dependencies:r,init:d(i),getTransferables:s&&d(s)},g.onMainThread=f,g}}}),n(268);var a=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return a=function(){return e},e},o=0,i=0,l=!1,s=Object.create(null),c=Object.create(null),u=Object.create(null);function f(e){c[e]&&c[e].forEach(function(e){e()}),s[e]&&(s[e].terminate(),delete s[e])}function d(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function m(e,t,n){return new Promise(function(a,o){var l=++i;u[l]=function(e){e.success?a(e.result):o(Error("Error in worker "+t+" call: "+e.error))},(function(e){var t=s[e];if(!t){var n=d(r);(t=s[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=u[n];if(!r)throw Error("WorkerModule response with empty or unknown messageId");delete u[n],r(t)}}return t})(e).postMessage({messageId:l,action:t,data:n})})}},2677:function(e,t,n){n.d(t,{Z:function(){return r}});function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}},1947:function(e,t){t.Z=function(){return function(e){var t,n,r,a,o={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},l={};i.L=1,l[1]="L",Object.keys(o).forEach(function(e,t){i[e]=1<<t+1,l[i[e]]=e}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,c=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,f=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,d=i.S|i.WS|i.B|s|i.PDI|f,m=null;function h(e){return!function(){if(!m){m=new Map;var e=function(e){if(o.hasOwnProperty(e)){var t=0;o[e].split(",").forEach(function(n){var r=n.split("+"),a=r[0],o=r[1];a=parseInt(a,36),o=o?parseInt(o,36):0,m.set(t+=a,i[e]);for(var l=0;l<o;l++)m.set(++t,i[e])})}};for(var t in o)e(t)}}(),m.get(e.codePointAt(0))||i.L}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function p(e,t){var n,r=0,a=new Map,o=t&&new Map;return e.split(",").forEach(function e(i){if(-1!==i.indexOf("+"))for(var l=+i;l--;)e(n);else{n=i;var s=i.split(">"),c=s[0],u=s[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),a.set(c,u),t&&o.set(u,c)}}),{map:a,reverseMap:o}}function g(){if(!t){var e=p(v.pairs,!0),a=e.map,o=e.reverseMap;t=a,n=o,r=p(v.canonical,!1).map}}function b(e){return g(),t.get(e)||null}function y(e){return g(),n.get(e)||null}function E(e){return g(),r.get(e)||null}var x=i.L,M=i.R,w=i.EN,_=i.ES,T=i.ET,A=i.AN,P=i.CS,S=i.B,R=i.S,O=i.ON,k=i.BN,L=i.NSM,D=i.AL,I=i.LRO,C=i.RLO,j=i.LRE,U=i.RLE,N=i.PDF,F=i.LRI,z=i.RLI,V=i.FSI,B=i.PDI;function W(e){return!function(){if(!a){var e=p("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach(function(e,n){t.set(n,e)}),a=t}}(),a.get(e)||null}function G(e,t,n,r){var a=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(a-1,null==r?a-1:+r);var o=[];return t.paragraphs.forEach(function(a){var i=Math.max(n,a.start),l=Math.min(r,a.end);if(i<l){for(var s=t.levels.slice(i,l+1),c=l;c>=i&&h(e[c])&d;c--)s[c]=a.level;for(var u=a.level,f=1/0,m=0;m<s.length;m++){var v=s[m];v>u&&(u=v),v<f&&(f=1|v)}for(var p=u;p>=f;p--)for(var g=0;g<s.length;g++)if(s[g]>=p){for(var b=g;g+1<s.length&&s[g+1]>=p;)g++;g>b&&o.push([b+i,g+i])}}}),o}function $(e,t,n,r){for(var a=G(e,t,n,r),o=[],i=0;i<e.length;i++)o[i]=i;return a.forEach(function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),a=r.length;a--;)o[n-a]=r[a]}),o}return e.closingToOpeningBracket=y,e.getBidiCharType=h,e.getBidiCharTypeName=function(e){return l[h(e)]},e.getCanonicalBracket=E,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=h(e[r]);var a=new Map;function o(e,t){var r=n[e];n[e]=t,a.set(r,a.get(r)-1),r&u&&a.set(u,a.get(u)-1),a.set(t,(a.get(t)||0)+1),t&u&&a.set(u,(a.get(u)||0)+1)}for(var i=new Uint8Array(e.length),l=new Map,m=[],v=null,p=0;p<e.length;p++)v||m.push(v={start:p,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:tO(p,!1)}),n[p]&S&&(v.end=p,v=null);for(var g=U|j|C|I|s|B|N|S,W=function(e){return e+(1&e?1:2)},G=function(e){return e+(1&e?2:1)},$=0;$<m.length;$++){var Y=[{_level:(v=m[$]).level,_override:0,_isolate:0}],H=void 0,X=0,q=0,Z=0;a.clear();for(var K=v.start;K<=v.end;K++){var Q=n[K];if(H=Y[Y.length-1],a.set(Q,(a.get(Q)||0)+1),Q&u&&a.set(u,(a.get(u)||0)+1),Q&g){if(Q&(U|j)){i[K]=H._level;var J=(Q===U?G:W)(H._level);!(J<=125)||X||q?!X&&q++:Y.push({_level:J,_override:0,_isolate:0})}else if(Q&(C|I)){i[K]=H._level;var ee=(Q===C?G:W)(H._level);!(ee<=125)||X||q?!X&&q++:Y.push({_level:ee,_override:Q&C?M:x,_isolate:0})}else if(Q&s){Q&V&&(Q=1===tO(K+1,!0)?z:F),i[K]=H._level,H._override&&o(K,H._override);var et=(Q===z?G:W)(H._level);et<=125&&0===X&&0===q?(Z++,Y.push({_level:et,_override:0,_isolate:1,_isolInitIndex:K})):X++}else if(Q&B){if(X>0)X--;else if(Z>0){for(q=0;!Y[Y.length-1]._isolate;)Y.pop();var en=Y[Y.length-1]._isolInitIndex;null!=en&&(l.set(en,K),l.set(K,en)),Y.pop(),Z--}H=Y[Y.length-1],i[K]=H._level,H._override&&o(K,H._override)}else Q&N?(0===X&&(q>0?q--:!H._isolate&&Y.length>1&&(Y.pop(),H=Y[Y.length-1])),i[K]=H._level):Q&S&&(i[K]=v.level)}else i[K]=H._level,H._override&&Q!==k&&o(K,H._override)}for(var er=[],ea=null,eo=v.start;eo<=v.end;eo++){var ei=n[eo];if(!(ei&f)){var el=i[eo],es=ei&s,ec=ei===B;ea&&el===ea._level?(ea._end=eo,ea._endsWithIsolInit=es):er.push(ea={_start:eo,_end:eo,_level:el,_startsWithPDI:ec,_endsWithIsolInit:es})}}for(var eu=[],ef=0;ef<er.length;ef++){var ed=er[ef];if(!ed._startsWithPDI||ed._startsWithPDI&&!l.has(ed._start)){for(var em=[ea=ed],eh=void 0;ea&&ea._endsWithIsolInit&&null!=(eh=l.get(ea._end));)for(var ev=ef+1;ev<er.length;ev++)if(er[ev]._start===eh){em.push(ea=er[ev]);break}for(var ep=[],eg=0;eg<em.length;eg++)for(var eb=em[eg],ey=eb._start;ey<=eb._end;ey++)ep.push(ey);for(var eE=i[ep[0]],ex=v.level,eM=ep[0]-1;eM>=0;eM--)if(!(n[eM]&f)){ex=i[eM];break}var ew=ep[ep.length-1],e_=i[ew],eT=v.level;if(!(n[ew]&s)){for(var eA=ew+1;eA<=v.end;eA++)if(!(n[eA]&f)){eT=i[eA];break}}eu.push({_seqIndices:ep,_sosType:Math.max(ex,eE)%2?M:x,_eosType:Math.max(eT,e_)%2?M:x})}}for(var eP=0;eP<eu.length;eP++){var eS=eu[eP],eR=eS._seqIndices,eO=eS._sosType,ek=eS._eosType,eL=1&i[eR[0]]?M:x;if(a.get(L))for(var eD=0;eD<eR.length;eD++){var eI=eR[eD];if(n[eI]&L){for(var eC=eO,ej=eD-1;ej>=0;ej--)if(!(n[eR[ej]]&f)){eC=n[eR[ej]];break}o(eI,eC&(s|B)?O:eC)}}if(a.get(w))for(var eU=0;eU<eR.length;eU++){var eN=eR[eU];if(n[eN]&w)for(var eF=eU-1;eF>=-1;eF--){var ez=-1===eF?eO:n[eR[eF]];if(ez&c){ez===D&&o(eN,A);break}}}if(a.get(D))for(var eV=0;eV<eR.length;eV++){var eB=eR[eV];n[eB]&D&&o(eB,M)}if(a.get(_)||a.get(P))for(var eW=1;eW<eR.length-1;eW++){var eG=eR[eW];if(n[eG]&(_|P)){for(var e$=0,eY=0,eH=eW-1;eH>=0&&(e$=n[eR[eH]])&f;eH--);for(var eX=eW+1;eX<eR.length&&(eY=n[eR[eX]])&f;eX++);e$===eY&&(n[eG]===_?e$===w:e$&(w|A))&&o(eG,e$)}}if(a.get(w)){for(var eq=0;eq<eR.length;eq++)if(n[eR[eq]]&w){for(var eZ=eq-1;eZ>=0&&n[eR[eZ]]&(T|f);eZ--)o(eR[eZ],w);for(eq++;eq<eR.length&&n[eR[eq]]&(T|f|w);eq++)n[eR[eq]]!==w&&o(eR[eq],w)}}if(a.get(T)||a.get(_)||a.get(P))for(var eK=0;eK<eR.length;eK++){var eQ=eR[eK];if(n[eQ]&(T|_|P)){o(eQ,O);for(var eJ=eK-1;eJ>=0&&n[eR[eJ]]&f;eJ--)o(eR[eJ],O);for(var e1=eK+1;e1<eR.length&&n[eR[e1]]&f;e1++)o(eR[e1],O)}}if(a.get(w))for(var e0=0,e2=eO;e0<eR.length;e0++){var e3=eR[e0],e5=n[e3];e5&w?e2===x&&o(e3,x):e5&c&&(e2=e5)}if(a.get(u)){for(var e4=M|w|A,e6=e4|x,e9=[],e7=[],e8=0;e8<eR.length;e8++)if(n[eR[e8]]&u){var te=e[eR[e8]],tt=void 0;if(null!==b(te)){if(e7.length<63)e7.push({char:te,seqIndex:e8});else break}else if(null!==(tt=y(te)))for(var tn=e7.length-1;tn>=0;tn--){var tr=e7[tn].char;if(tr===tt||tr===y(E(te))||b(E(tr))===te){e9.push([e7[tn].seqIndex,e8]),e7.length=tn;break}}}e9.sort(function(e,t){return e[0]-t[0]});for(var ta=0;ta<e9.length;ta++){for(var to=e9[ta],ti=to[0],tl=to[1],ts=!1,tc=0,tu=ti+1;tu<tl;tu++){var tf=eR[tu];if(n[tf]&e6){ts=!0;var td=n[tf]&e4?M:x;if(td===eL){tc=td;break}}}if(ts&&!tc){tc=eO;for(var tm=ti-1;tm>=0;tm--){var th=eR[tm];if(n[th]&e6){var tv=n[th]&e4?M:x;tc=tv!==eL?tv:eL;break}}}if(tc){if(n[eR[ti]]=n[eR[tl]]=tc,tc!==eL){for(var tp=ti+1;tp<eR.length;tp++)if(!(n[eR[tp]]&f)){h(e[eR[tp]])&L&&(n[eR[tp]]=tc);break}}if(tc!==eL){for(var tg=tl+1;tg<eR.length;tg++)if(!(n[eR[tg]]&f)){h(e[eR[tg]])&L&&(n[eR[tg]]=tc);break}}}}for(var tb=0;tb<eR.length;tb++)if(n[eR[tb]]&u){for(var ty=tb,tE=tb,tx=eO,tM=tb-1;tM>=0;tM--)if(n[eR[tM]]&f)ty=tM;else{tx=n[eR[tM]]&e4?M:x;break}for(var tw=ek,t_=tb+1;t_<eR.length;t_++)if(n[eR[t_]]&(u|f))tE=t_;else{tw=n[eR[t_]]&e4?M:x;break}for(var tT=ty;tT<=tE;tT++)n[eR[tT]]=tx===tw?tx:eL;tb=tE}}}for(var tA=v.start;tA<=v.end;tA++){var tP=i[tA],tS=n[tA];if(1&tP?tS&(x|w|A)&&i[tA]++:tS&M?i[tA]++:tS&(A|w)&&(i[tA]+=2),tS&f&&(i[tA]=0===tA?v.level:i[tA-1]),tA===v.end||h(e[tA])&(R|S))for(var tR=tA;tR>=0&&h(e[tR])&d;tR--)i[tR]=v.level}}return{levels:i,paragraphs:m};function tO(t,r){for(var a=t;a<e.length;a++){var o=n[a];if(o&(M|D))return 1;if(o&(S|x)||r&&o===B)break;if(o&s){var i=function(t){for(var r=1,a=t+1;a<e.length;a++){var o=n[a];if(o&S)break;if(o&B){if(0==--r)return a}else o&s&&r++}return -1}(a);a=-1===i?e.length:i}}return 0}},e.getMirroredCharacter=W,e.getMirroredCharactersMap=function(e,t,n,r){var a=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(a-1,null==r?a-1:+r);for(var o=new Map,i=n;i<=r;i++)if(1&t[i]){var l=W(e[i]);null!==l&&o.set(i,l)}return o},e.getReorderSegments=G,e.getReorderedIndices=$,e.getReorderedString=function(e,t,n,r){var a=$(e,t,n,r),o=[].concat(e);return a.forEach(function(n,r){o[r]=(1&t.levels[n]?W(e[n]):null)||e[n]}),o.join("")},e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}},3400:function(e,t,n){n.d(t,{i:function(){return r}});let r=parseInt(n(1869).REVISION.replace(/\D+/g,""))},5697:function(e,t,n){n.d(t,{Z:function(){return r}});function r(){return function(e){function t(e,t){for(var n,r,a,o,i,l=/([MLQCZ])([^MLQCZ]*)/g;n=l.exec(e);){var s=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(e){return parseFloat(e)});switch(n[1]){case"M":o=r=s[0],i=a=s[1];break;case"L":(s[0]!==o||s[1]!==i)&&t("L",o,i,o=s[0],i=s[1]);break;case"Q":t("Q",o,i,o=s[2],i=s[3],s[0],s[1]);break;case"C":t("C",o,i,o=s[4],i=s[5],s[0],s[1],s[2],s[3]);break;case"Z":(o!==r||i!==a)&&t("L",o,i,r,a)}}}function n(e,n,r){void 0===r&&(r=16);var a={x:0,y:0};t(e,function(e,t,o,i,l,s,c,u,f){switch(e){case"L":n(t,o,i,l);break;case"Q":for(var d=t,m=o,h=1;h<r;h++)!function(e,t,n,r,a,o,i,l){var s=1-i;l.x=s*s*e+2*s*i*n+i*i*a,l.y=s*s*t+2*s*i*r+i*i*o}(t,o,s,c,i,l,h/(r-1),a),n(d,m,a.x,a.y),d=a.x,m=a.y;break;case"C":for(var v=t,p=o,g=1;g<r;g++)!function(e,t,n,r,a,o,i,l,s,c){var u=1-s;c.x=u*u*u*e+3*u*u*s*n+3*u*s*s*a+s*s*s*i,c.y=u*u*u*t+3*u*u*s*r+3*u*s*s*o+s*s*s*l}(t,o,s,c,u,f,i,l,g/(r-1),a),n(v,p,a.x,a.y),v=a.x,p=a.y}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function i(e,t){var n=e.getContext?e.getContext("webgl",o):e,r=a.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,l={},s={},c={},u=-1,f=[];function d(e){var t=l[e];if(!t&&!(t=l[e]=n.getExtension(e)))throw Error(e+" not supported");return t}function m(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function h(){l={},s={},c={},u=-1,f.length=0}n.canvas.addEventListener("webglcontextlost",function(e){h(),e.preventDefault()},!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:function(e,t,r,a){if(!s[e]){var o={},l={},c=n.createProgram();n.attachShader(c,m(t,n.VERTEX_SHADER)),n.attachShader(c,m(r,n.FRAGMENT_SHADER)),n.linkProgram(c),s[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var r=[],a=arguments.length-2;a-- >0;)r[a]=arguments[a+2];var o=l[t]||(l[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,a,l){var s=o[e];s||(s=o[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,s.buf),n.vertexAttribPointer(s.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(s.loc),i?n.vertexAttribDivisor(s.loc,a):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(s.loc,a),l!==s.data&&(n.bufferData(n.ARRAY_BUFFER,l,r),s.data=l)}})}}}s[e].transaction(a)},withTexture:function(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}},withTextureFramebuffer:function(e,t,r){var a=n.createFramebuffer();f.push(a),n.bindFramebuffer(n.FRAMEBUFFER,a),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(a)}finally{n.deleteFramebuffer(a),n.bindFramebuffer(n.FRAMEBUFFER,f[--f.length-1]||null)}},handleContextLoss:h})}t(r)}function l(e,t,n,a,o,l,s,c){void 0===s&&(s=15),void 0===c&&(c=null),i(e,function(e){var i=e.gl,u=e.withProgram;(0,e.withTexture)("copy",function(e,f){i.texImage2D(i.TEXTURE_2D,0,i.RGBA,o,l,0,i.RGBA,i.UNSIGNED_BYTE,t),u("copy",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,i.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",f),i.bindFramebuffer(i.FRAMEBUFFER,c||null),i.disable(i.BLEND),i.colorMask(8&s,4&s,2&s,1&s),i.viewport(n,a,o,l),i.scissor(n,a,o,l),i.drawArrays(i.TRIANGLES,0,3)})})})}var s=Object.freeze({__proto__:null,withWebGLContext:i,renderImageData:l,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,a=e.height;i(e,function(o){var i=o.gl,s=new Uint8Array(r*a*4);i.readPixels(0,0,r,a,i.RGBA,i.UNSIGNED_BYTE,s),e.width=t,e.height=n,l(i,s,0,0,r,a)})}});function c(e,t,r,a,o,i){void 0===i&&(i=1);var l=new Uint8Array(e*t),s=a[2]-a[0],c=a[3]-a[1],u=[];n(r,function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})}),u.sort(function(e,t){return e.maxX-t.maxX});for(var f=0;f<e;f++)for(var d=0;d<t;d++){var m=function(e,t){for(var n=1/0,r=1/0,a=u.length;a--;){var o=u[a];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var i=function(e,t,n,r,a,o){var i=a-n,l=o-r,s=i*i+l*l,c=s?Math.max(0,Math.min(1,((e-n)*i+(t-r)*l)/s)):0,u=e-(n+c*i),f=t-(r+c*l);return u*u+f*f}(e,t,o.x1,o.y1,o.x2,o.y2);i<n&&(r=Math.sqrt(n=i))}}return function(e,t){for(var n=0,r=u.length;r--;){var a=u[r];if(a.maxX<=e)break;a.y1>t!=a.y2>t&&e<(a.x2-a.x1)*(t-a.y1)/(a.y2-a.y1)+a.x1&&(n+=a.y1<a.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}(a[0]+s*(f+.5)/e,a[1]+c*(d+.5)/t),h=Math.pow(1-Math.abs(m)/o,i)/2;m<0&&(h=1-h),h=Math.max(0,Math.min(255,Math.round(255*h))),l[d*e+f]=h}return l}function u(e,t,n,r,a,o,i,l,s,c){void 0===o&&(o=1),void 0===l&&(l=0),void 0===s&&(s=0),void 0===c&&(c=0),f(e,t,n,r,a,o,i,null,l,s,c)}function f(e,t,n,r,a,o,i,s,u,f,d){void 0===o&&(o=1),void 0===u&&(u=0),void 0===f&&(f=0),void 0===d&&(d=0);for(var m=c(e,t,n,r,a,o),h=new Uint8Array(4*m.length),v=0;v<m.length;v++)h[4*v+d]=m[v];l(i,h,u,f,e,t,1<<3-d,s)}var d=Object.freeze({__proto__:null,generate:c,generateIntoCanvas:u,generateIntoFramebuffer:f}),m=new Float32Array([0,0,2,0,0,2]),h=null,v=!1,p={},g=new WeakMap;function b(e){if(!v&&!M(e))throw Error("WebGL generation not supported")}function y(e,t,n,r,a,o,l){if(void 0===o&&(o=1),void 0===l&&(l=null),!l&&!(l=h)){var s="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!s)throw Error("OffscreenCanvas or DOM canvas not supported");l=h=s.getContext("webgl",{depth:!1})}b(l);var c=new Uint8Array(e*t*4);i(l,function(i){var l=i.gl,s=i.withTexture,u=i.withTextureFramebuffer;s("readable",function(i,s){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,e,t,0,l.RGBA,l.UNSIGNED_BYTE,null),u(i,s,function(i){x(e,t,n,r,a,o,l,i,0,0,0),l.readPixels(0,0,e,t,l.RGBA,l.UNSIGNED_BYTE,c)})})});for(var u=new Uint8Array(e*t),f=0,d=0;f<c.length;f+=4)u[d++]=c[f];return u}function E(e,t,n,r,a,o,i,l,s,c){void 0===o&&(o=1),void 0===l&&(l=0),void 0===s&&(s=0),void 0===c&&(c=0),x(e,t,n,r,a,o,i,null,l,s,c)}function x(e,t,a,o,l,s,c,u,f,d,h){void 0===s&&(s=1),void 0===f&&(f=0),void 0===d&&(d=0),void 0===h&&(h=0),b(c);var v=[];n(a,function(e,t,n,r){v.push(e,t,n,r)}),v=new Float32Array(v),i(c,function(n){var a=n.gl,i=n.isWebGL2,c=n.getExtension,p=n.withProgram,g=n.withTexture,b=n.withTextureFramebuffer,y=n.handleContextLoss;if(g("rawDistances",function(n,g){(e!==n._lastWidth||t!==n._lastHeight)&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n._lastWidth=e,n._lastHeight=t,0,a.RGBA,a.UNSIGNED_BYTE,null),p("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",function(r){var u=r.setAttribute,f=r.setUniform,d=!i&&c("ANGLE_instanced_arrays"),h=!i&&c("EXT_blend_minmax");u("aUV",2,a.STATIC_DRAW,0,m),u("aLineSegment",4,a.DYNAMIC_DRAW,1,v),f.apply(void 0,["4f","uGlyphBounds"].concat(o)),f("1f","uMaxDistance",l),f("1f","uExponent",s),b(n,g,function(n){a.enable(a.BLEND),a.colorMask(!0,!0,!0,!0),a.viewport(0,0,e,t),a.scissor(0,0,e,t),a.blendFunc(a.ONE,a.ONE),a.blendEquationSeparate(a.FUNC_ADD,i?a.MAX:h.MAX_EXT),a.clear(a.COLOR_BUFFER_BIT),i?a.drawArraysInstanced(a.TRIANGLES,0,3,v.length/4):d.drawArraysInstancedANGLE(a.TRIANGLES,0,3,v.length/4)})}),p("post",r,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",function(n){n.setAttribute("aUV",2,a.STATIC_DRAW,0,m),n.setUniform("1i","tex",g),a.bindFramebuffer(a.FRAMEBUFFER,u),a.disable(a.BLEND),a.colorMask(0===h,1===h,2===h,3===h),a.viewport(f,d,e,t),a.scissor(f,d,e,t),a.drawArrays(a.TRIANGLES,0,3)})}),a.isContextLost())throw y(),Error("webgl context lost")})}function M(e){var t=e&&e!==h?e.canvas||e:p,n=g.get(t);if(void 0===n){v=!0;var r=null;try{var a=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&a.length===o.length&&o.every(function(e,t){return e===a[t]}))||(r="bad trial run results",console.info(a,o))}catch(e){n=!1,r=e.message}r&&console.warn("WebGL SDF generation not supported:",r),v=!1,g.set(t,n)}return n}var w=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:E,generateIntoFramebuffer:x,isSupported:M});return e.forEachPathCommand=t,e.generate=function(e,t,n,r,a,o){void 0===a&&(a=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return y.apply(w,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),c.apply(d,arguments)}},e.generateIntoCanvas=function(e,t,n,r,a,o,i,l,s,c){void 0===a&&(a=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===l&&(l=0),void 0===s&&(s=0),void 0===c&&(c=0);try{return E.apply(w,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),u.apply(d,arguments)}},e.javascript=d,e.pathToLineSegments=n,e.webgl=w,e.webglUtils=s,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}}}]);