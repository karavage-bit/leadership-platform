"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{4747:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var s=n(8357),l=n(921),i=n(7285);function c(e){let{studentId:t,classId:n}=e,[c,o]=(0,l.useState)(!1),[a,d]=(0,l.useState)(null),r=(0,i.createClientComponentClient)();(0,l.useEffect)(()=>{(async()=>{let{data:e}=await r.from("student_cores").select("is_ghost, ghost_cooldown_end").eq("student_id",t).single();e&&(o(e.is_ghost||!1),e.ghost_cooldown_end&&d(new Date(e.ghost_cooldown_end)))})()},[t,r]);let u=async()=>{if(a&&new Date<a)return;let e=!c,n=e?null:new Date(Date.now()+864e5);await r.from("student_cores").update({is_ghost:e,ghost_cooldown_end:null==n?void 0:n.toISOString()}).eq("student_id",t),o(e),d(n)},x=a&&new Date<a;return(0,s.jsxs)("div",{className:"bg-zinc-900/80 backdrop-blur-sm rounded-2xl p-4 border border-zinc-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(c?"bg-purple-500/20":"bg-zinc-700"),children:(0,s.jsx)("span",{className:"text-xl",children:c?"\uD83D\uDC7B":"\uD83D\uDC64"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-medium",children:"Ghost Mode"}),(0,s.jsx)("p",{className:"text-zinc-500 text-xs",children:c?"Hidden from Nexus":x?"On cooldown":"Visible to class"})]})]}),(0,s.jsx)("button",{onClick:u,disabled:!!x,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all ".concat(x?"bg-zinc-700 text-zinc-500 cursor-not-allowed":c?"bg-purple-500 text-white hover:bg-purple-400":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"),children:c?"Reveal":"Hide"})]}),x&&a&&(0,s.jsxs)("p",{className:"text-zinc-600 text-xs mt-2",children:["Available in ",Math.ceil((a.getTime()-Date.now())/36e5),"h"]})]})}}}]);