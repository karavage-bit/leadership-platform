"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{1072:function(e,s,t){t.d(s,{Z:function(){return a}});let a=(0,t(7415).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9875:function(e,s,t){t.r(s),t.d(s,{default:function(){return x}});var a=t(8357),l=t(921),n=t(1808),r=t(1374),i=t(4615),c=t(3836),d=t(8288),o=t(1072),u=t(7925);function x(e){let{studentId:s,isOpen:t,onClose:x}=e,[f,m]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),[v,g]=(0,l.useState)(null),j=(0,u.createClient)();(0,l.useEffect)(()=>{t&&s&&N()},[t,s]);let N=async()=>{let{data:e}=await j.from("private_notes").select("content, updated_at").eq("student_id",s).single();e&&(m(e.content||""),g(new Date(e.updated_at)))},y=async()=>{p(!0);let{error:e}=await j.from("private_notes").upsert({student_id:s,content:f,updated_at:new Date().toISOString()},{onConflict:"student_id"});p(!1),e||g(new Date)};return(0,l.useEffect)(()=>{let e=setTimeout(()=>{f&&s&&y()},2e3);return()=>clearTimeout(e)},[f]),(0,a.jsx)(n.M,{children:t&&(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:(0,a.jsxs)(r.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-surface-800 rounded-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-surface-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-surface-700 rounded-lg",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-primary-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-white",children:"Private Notes"}),(0,a.jsx)("p",{className:"text-xs text-surface-400",children:"Only you can see this. Never graded. Never shared."})]})]}),(0,a.jsx)("button",{onClick:x,className:"p-2 hover:bg-surface-700 rounded-lg transition-colors",children:(0,a.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,a.jsx)("textarea",{value:f,onChange:e=>m(e.target.value),placeholder:"Write whatever's on your mind. This is your space to think freely, process emotions, or just vent. No one else will ever see this...",className:"w-full h-full min-h-[300px] bg-surface-900 rounded-xl p-4 text-surface-100 placeholder-surface-500 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500/50"})}),(0,a.jsxs)("footer",{className:"flex items-center justify-between p-4 border-t border-surface-700",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm text-surface-400",children:h?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Saving..."]}):v?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Saved ",v.toLocaleTimeString()]}):(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Start writing..."]})}),(0,a.jsxs)("button",{onClick:y,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-500 rounded-lg transition-colors disabled:opacity-50",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Save"]})]})]})})})}}}]);