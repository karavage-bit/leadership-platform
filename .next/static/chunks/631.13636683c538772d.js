"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{2631:function(e,s,t){t.r(s),t.d(s,{default:function(){return x}});var l=t(8357),a=t(921),r=t(1374),n=t(8267),i=t(7415);let c=(0,i.Z)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),d=(0,i.Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function x(e){var s,t;let{students:i,connections:x,currentUserId:o,classStats:u}=e,h=(0,a.useRef)(null),m=(0,a.useRef)(null),[f,p]=(0,a.useState)(1),[v,g]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),b=(0,a.useMemo)(()=>{let e={};return i.forEach((s,t)=>{let l=t/i.length*Math.PI*2-Math.PI/2;e[s.id]={x:250+180*Math.cos(l),y:250+180*Math.sin(l)}}),e},[i]);(0,a.useEffect)(()=>{let e=h.current;if(!e)return;let s=e.getContext("2d");s&&(s.clearRect(0,0,500,500),x.forEach(e=>{let t=b[e.from],l=b[e.to];if(!t||!l)return;let a=j===e.from||j===e.to,r=e.from===o||e.to===o;s.beginPath(),s.moveTo(t.x,t.y),s.lineTo(l.x,l.y),a||r?(s.strokeStyle="ripple"===e.type?"#22d3ee":"bridge"===e.type?"#a855f7":"group"===e.type?"#f59e0b":"#ec4899",s.lineWidth=2+Math.min(e.strength,5),s.globalAlpha=1):(s.strokeStyle="#475569",s.lineWidth=1+Math.min(e.strength/2,2),s.globalAlpha=.4),s.stroke(),s.globalAlpha=1}),i.forEach(e=>{let t=b[e.id];if(!t)return;let l=e.id===o,a=e.id===j,r=(null==v?void 0:v.id)===e.id,n=12+Math.min((e.helpGiven+e.ripplesStarted)/5,8);(l||a||r)&&(s.beginPath(),s.arc(t.x,t.y,n+8,0,2*Math.PI),s.fillStyle=l?"rgba(250, 204, 21, 0.3)":"rgba(168, 85, 247, 0.3)",s.fill()),s.beginPath(),s.arc(t.x,t.y,n,0,2*Math.PI),s.fillStyle=l?"#facc15":["#6b7280","#22c55e","#3b82f6","#a855f7","#f59e0b"][e.tier]||"#6b7280",s.fill(),s.strokeStyle=a?"#fff":"rgba(255,255,255,0.3)",s.lineWidth=a?3:1,s.stroke()}))},[i,x,b,o,j,v]);let y=(e,s)=>{for(let t of i){let l=b[t.id];if(!l)continue;let a=e-l.x,r=s-l.y;if(20>Math.sqrt(a*a+r*r))return t}return null},k=(0,a.useMemo)(()=>j?x.filter(e=>e.from===j||e.to===j):[],[j,x]),w=i.find(e=>e.id===j);return 0===i.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(n.Z,{className:"mx-auto mb-4 text-surface-500",size:48}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Connections Yet"}),(0,l.jsx)("p",{className:"text-surface-400 text-sm",children:"As classmates help each other, the connection map will grow."})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,l.jsx)(n.Z,{className:"text-purple-400",size:24}),"Class Connection Map"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>p(e=>Math.max(.5,e-.1)),className:"p-2 bg-surface-800 rounded-lg hover:bg-surface-700",children:(0,l.jsx)(c,{size:16,className:"text-surface-400"})}),(0,l.jsxs)("span",{className:"text-xs text-surface-400 w-12 text-center",children:[Math.round(100*f),"%"]}),(0,l.jsx)("button",{onClick:()=>p(e=>Math.min(2,e+.1)),className:"p-2 bg-surface-800 rounded-lg hover:bg-surface-700",children:(0,l.jsx)(d,{size:16,className:"text-surface-400"})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,l.jsxs)("div",{className:"bg-surface-800/50 rounded-xl p-3 text-center border border-surface-700",children:[(0,l.jsx)("div",{className:"text-xl font-bold text-white",children:u.totalConnections}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Connections"})]}),(0,l.jsxs)("div",{className:"bg-surface-800/50 rounded-xl p-3 text-center border border-surface-700",children:[(0,l.jsx)("div",{className:"text-xl font-bold text-cyan-400",children:u.totalRipples}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Total Ripples"})]}),(0,l.jsxs)("div",{className:"bg-surface-800/50 rounded-xl p-3 text-center border border-surface-700",children:[(0,l.jsx)("div",{className:"text-xl font-bold text-pink-400",children:u.averageHelpPerStudent.toFixed(1)}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Avg Help/Student"})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-400"}),(0,l.jsx)("span",{className:"text-surface-400",children:"You"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-0.5 bg-pink-500"}),(0,l.jsx)("span",{className:"text-surface-400",children:"Help"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-0.5 bg-cyan-400"}),(0,l.jsx)("span",{className:"text-surface-400",children:"Ripple"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-0.5 bg-purple-500"}),(0,l.jsx)("span",{className:"text-surface-400",children:"Bridge"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-0.5 bg-amber-500"}),(0,l.jsx)("span",{className:"text-surface-400",children:"Group"})]})]}),(0,l.jsxs)("div",{ref:m,className:"relative bg-surface-900 rounded-xl border border-surface-700 overflow-hidden",style:{height:400},children:[(0,l.jsx)("canvas",{ref:h,width:500,height:500,onClick:e=>{var s;let t=null===(s=h.current)||void 0===s?void 0:s.getBoundingClientRect();if(!t)return;let l=y((e.clientX-t.left)/f,(e.clientY-t.top)/f);N((null==l?void 0:l.id)||null)},onMouseMove:e=>{var s;let t=null===(s=h.current)||void 0===s?void 0:s.getBoundingClientRect();t&&g(y((e.clientX-t.left)/f,(e.clientY-t.top)/f))},onMouseLeave:()=>g(null),className:"cursor-pointer",style:{transform:"scale(".concat(f,")"),transformOrigin:"top left",width:500,height:500}}),v&&(0,l.jsxs)("div",{className:"absolute bg-black/90 px-3 py-2 rounded-lg text-sm pointer-events-none border border-surface-600",style:{left:(null===(s=b[v.id])||void 0===s?void 0:s.x)*f+20,top:(null===(t=b[v.id])||void 0===t?void 0:t.y)*f-20},children:[(0,l.jsx)("div",{className:"font-medium text-white",children:v.isUnmasked?v.name:"\uD83C\uDFAD ".concat(v.anonymousName)}),(0,l.jsxs)("div",{className:"text-xs text-surface-400 mt-1",children:[v.helpGiven," help given • ",v.ripplesStarted," ripples"]})]})]}),w&&(0,l.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-surface-800/50 rounded-xl p-4 border border-purple-500/30",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("h3",{className:"font-semibold text-white flex items-center gap-2",children:[w.id===o&&(0,l.jsx)("span",{className:"text-yellow-400",children:"⭐"}),w.isUnmasked?w.name:"\uD83C\uDFAD ".concat(w.anonymousName)]}),(0,l.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-surface-700 text-surface-300",children:["Tier ",w.tier]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-center text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-pink-400",children:w.helpGiven}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Help Given"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-cyan-400",children:w.ripplesStarted}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Ripples"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold text-purple-400",children:k.length}),(0,l.jsx)("div",{className:"text-xs text-surface-400",children:"Connections"})]})]}),k.length>0&&(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-surface-700",children:[(0,l.jsx)("div",{className:"text-xs text-surface-400 mb-2",children:"Connected to:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[k.slice(0,8).map((e,s)=>{let t=e.from===j?e.to:e.from,a=i.find(e=>e.id===t);return a?(0,l.jsx)("span",{className:"px-2 py-0.5 bg-surface-700 rounded text-xs text-surface-300",children:a.isUnmasked?a.name:a.anonymousName},s):null}),k.length>8&&(0,l.jsxs)("span",{className:"px-2 py-0.5 text-xs text-surface-500",children:["+",k.length-8," more"]})]})]})]}),(0,l.jsx)("p",{className:"text-xs text-surface-500 text-center",children:"Click on any node to see their connections • Thicker lines = stronger connections"})]})}}}]);