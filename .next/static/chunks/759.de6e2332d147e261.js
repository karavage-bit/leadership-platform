"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{9759:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var a=t(8357),l=t(921),c=t(1374),r=t(8633);let n=(0,t(7415).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var i=t(8844),d=t(8556),o=t(795),x=t(9045),m=t(2294),h=t(7925);function p(e){let{studentId:s}=e,[t,p]=(0,l.useState)([]),[u,f]=(0,l.useState)(0),[b,N]=(0,l.useState)(!0),j=(0,h.createClient)();(0,l.useEffect)(()=>{_()},[s]);let _=async()=>{let{data:e}=await j.from("student_lessons").select("\n        lesson_id,\n        do_now_complete,\n        scenario_complete,\n        challenge_complete,\n        updated_at,\n        lessons (\n          skill_name,\n          phase_id\n        )\n      ").eq("student_id",s).order("lesson_id");e&&p(e.map(e=>{var s;return{lesson_id:e.lesson_id,skill_name:(null===(s=e.lessons)||void 0===s?void 0:s.skill_name)||"",completed_at:e.updated_at,do_now_complete:e.do_now_complete,scenario_complete:e.scenario_complete,challenge_complete:e.challenge_complete}})),N(!1)},v=t.reduce((e,s)=>{let t=Math.floor((s.lesson_id-1)/5);return e[t]||(e[t]=[]),e[t].push(s),e},{}),g=Object.keys(v).map(Number).sort((e,s)=>e-s),w=v[g[u]]||[],y=e=>{let s=0;return e.do_now_complete&&s++,e.scenario_complete&&s++,e.challenge_complete&&s++,s};return b?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full"})}):(0,a.jsxs)("div",{className:"bg-surface-800 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.Z,{className:"w-6 h-6 text-primary-400"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Your Journey"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>f(Math.max(0,u-1)),disabled:0===u,className:"p-2 bg-surface-700 hover:bg-surface-600 rounded-lg disabled:opacity-50",children:(0,a.jsx)(n,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"text-sm text-surface-300 px-3",children:["Week ",u+1]}),(0,a.jsx)("button",{onClick:()=>f(Math.min(g.length-1,u+1)),disabled:u>=g.length-1,className:"p-2 bg-surface-700 hover:bg-surface-600 rounded-lg disabled:opacity-50",children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-surface-700"}),(0,a.jsx)("div",{className:"space-y-4",children:w.map((e,s)=>{var t;let l=y(e),r=3===l;return(0,a.jsxs)(c.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"relative pl-16",children:[(0,a.jsx)("div",{className:"absolute left-4 w-5 h-5 rounded-full border-2 ".concat(r?"bg-primary-500 border-primary-500":l>0?"bg-surface-800 border-primary-500":"bg-surface-800 border-surface-600"),children:r&&(0,a.jsx)(d.Z,{className:"w-3 h-3 text-white absolute top-0.5 left-0.5"})}),(0,a.jsxs)("div",{className:"p-4 rounded-xl ".concat(r?"bg-primary-500/10 border border-primary-500/30":"bg-surface-700/50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:e.skill_name||"Lesson ".concat(e.lesson_id)}),(0,a.jsxs)("span",{className:"text-xs text-surface-400",children:["Day ",s+1]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs ".concat(e.do_now_complete?"text-primary-400":"text-surface-500"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Do Now"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs ".concat(e.scenario_complete?"text-green-400":"text-surface-500"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Scenario"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs ".concat(e.challenge_complete?"text-purple-400":"text-surface-500"),children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),"Challenge"]})]}),r&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-surface-600",children:(0,a.jsxs)("p",{className:"text-sm text-surface-300 italic",children:['"This is when I learned about ',null===(t=e.skill_name)||void 0===t?void 0:t.toLowerCase(),'..."']})})]})]},e.lesson_id)})})]}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-surface-700 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-400",children:t.filter(e=>e.do_now_complete).length}),(0,a.jsx)("div",{className:"text-xs text-surface-400",children:"Do Nows"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-400",children:t.filter(e=>e.scenario_complete).length}),(0,a.jsx)("div",{className:"text-xs text-surface-400",children:"Scenarios"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:t.filter(e=>e.challenge_complete).length}),(0,a.jsx)("div",{className:"text-xs text-surface-400",children:"Challenges"})]})]})]})}}}]);