(()=>{var e={};e.id=941,e.ids=[941],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},1369:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(2973),t(7685),t(5866);var a=t(3191),r=t(8716),i=t(7922),l=t.n(i),c=t(5231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);t.d(s,n);let d=["",{children:["teacher",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2973)),"/workspace/leadership-platform/src/app/teacher/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7685)),"/workspace/leadership-platform/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspace/leadership-platform/src/app/teacher/page.tsx"],x="/teacher/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/teacher/page",pathname:"/teacher",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1917:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},1839:(e,s,t)=>{Promise.resolve().then(t.bind(t,6716))},2652:(e,s,t)=>{Promise.resolve().then(t.bind(t,3381))},6226:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},2933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9183:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1810:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},617:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},4019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6716:(e,s,t)=>{"use strict";t.d(s,{ErrorBoundaryWrapper:()=>d});var a=t(326),r=t(7577),i=t(949),l=t(1405),c=t(9798);class n extends r.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,s){console.error("ErrorBoundary caught an error:",e,s),this.setState({errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen bg-surface-950 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-surface-900 rounded-2xl p-8 text-center border border-surface-800",children:[a.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(i.Z,{className:"text-red-400",size:32})}),a.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-surface-400 mb-6",children:"Don't worry - your progress is saved. Try refreshing, or head back to the home page."}),!1,(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:this.handleRetry,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-xl transition-colors",children:[a.jsx(l.Z,{size:18}),"Try Again"]}),(0,a.jsxs)("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-surface-800 hover:bg-surface-700 text-white rounded-xl transition-colors",children:[a.jsx(c.Z,{size:18}),"Go Home"]})]})]})}):this.props.children}}function d({children:e}){return a.jsx(n,{children:e})}},3381:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(326),r=t(7577),i=t(9701),l=t(5047),c=t(5534),n=t(8129),d=t(2881);let o=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var x=t(949),m=t(1405),u=t(1810);let h=(0,d.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var p=t(6226),f=t(4061);let b=(0,d.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var g=t(9183),j=t(617);let v=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var y=t(1572),N=t(8998),w=t(4019);let _=(0,d.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var k=t(2933);function S(){let[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)([]),[g,j]=(0,r.useState)(null),[v,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(null),[_,k]=(0,r.useState)([]),[S,E]=(0,r.useState)([]),[Z,z]=(0,r.useState)({completed:0,total:0}),[R,D]=(0,r.useState)(!0),[T,I]=(0,r.useState)("overview"),[$,B]=(0,r.useState)(!1),[H,U]=(0,r.useState)(!1),O=(0,l.useRouter)(),W=(0,i.e)(),G=async e=>{U(!0);try{let{data:s}=await W.from("users").select("*").eq("class_id",e).eq("role","student").order("name");y(s||[]);let a=t.find(s=>s.id===e);if(a){let{data:e}=await W.from("lessons").select("*").eq("id",a.current_lesson_id).single();w(e)}let{data:r}=await W.from("challenge_submissions").select("*").eq("class_id",e).eq("review_status","pending").order("submitted_at",{ascending:!1}),i=await Promise.all((r||[]).map(async e=>{let{data:s}=await W.from("users").select("id, name").eq("id",e.student_id).single(),{data:t}=await W.from("lessons").select("id, skill_name, phase_id").eq("id",e.lesson_id).single();return{...e,student:s,lesson:t}}));k(i);let{data:l}=await W.from("crisis_alerts").select("*").eq("class_id",e).eq("status","unread").order("created_at",{ascending:!1}),c=await Promise.all((l||[]).map(async e=>{let{data:s}=await W.from("users").select("id, name").eq("id",e.student_id).single();return{...e,student:s}}));E(c);let n=new Date().toISOString().split("T")[0],{data:d}=await W.from("do_now_sessions").select("id").eq("class_id",e).eq("date",n);z({completed:d?.length||0,total:s?.length||0})}catch(e){console.error("Error loading class data:",e)}finally{U(!1)}},V=async()=>{if(!g||!N)return;let e=Math.min(N.id+1,45);await W.from("classes").update({current_lesson_id:e}).eq("id",g.id);let s=v.map(s=>({student_id:s.id,lesson_id:e,class_id:g.id,status:"available"}));await W.from("student_lessons").upsert(s,{onConflict:"student_id,lesson_id"}),j({...g,current_lesson_id:e}),G(g.id)},X=async()=>{await W.auth.signOut(),O.push("/")},F=async e=>{await W.from("crisis_alerts").update({status:"read"}).eq("id",e),E(s=>s.filter(s=>s.id!==e))};return R?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-950",children:a.jsx(c.E.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-surface-950",children:[(0,a.jsxs)("header",{className:"bg-surface-900/95 backdrop-blur-md border-b border-surface-800 sticky top-0 z-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:"\uD83D\uDCDA"}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"font-bold text-surface-100 text-lg",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-xs text-surface-500",children:e?.name})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>B(!$),className:"flex items-center gap-2 px-4 py-2 bg-surface-800 rounded-xl hover:bg-surface-700 transition-colors",children:[a.jsx("span",{className:"text-surface-200 font-medium",children:g?.name}),a.jsx(o,{size:16,className:"text-surface-400"})]}),a.jsx(n.M,{children:$&&a.jsx(c.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full mt-2 left-0 bg-surface-800 rounded-xl border border-surface-700 shadow-xl overflow-hidden min-w-[200px] z-50",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>{j(e),B(!1)},className:`w-full px-4 py-3 text-left hover:bg-surface-700 transition-colors flex items-center justify-between ${g?.id===e.id?"bg-primary-500/10 text-primary-400":"text-surface-200"}`,children:[a.jsx("span",{children:e.name}),a.jsx("span",{className:"text-xs text-surface-500 font-mono",children:e.code})]},e.id))})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[S.length>0&&(0,a.jsxs)(c.E.button,{onClick:()=>I("alerts"),className:"flex items-center gap-2 px-3 py-2 bg-courage/20 border border-courage/30 rounded-xl text-courage",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:[a.jsx(x.Z,{size:18}),(0,a.jsxs)("span",{className:"font-semibold",children:[S.length," Alert",1!==S.length?"s":""]})]}),a.jsx("button",{onClick:()=>g&&G(g.id),className:`p-2 text-surface-400 hover:text-surface-200 rounded-lg hover:bg-surface-800 transition-all ${H?"animate-spin":""}`,children:a.jsx(m.Z,{size:20})}),a.jsx("button",{onClick:X,className:"p-2 text-surface-400 hover:text-surface-200 rounded-lg hover:bg-surface-800 transition-colors",children:a.jsx(u.Z,{size:20})})]})]}),a.jsx("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex gap-1 -mb-px",children:[a.jsx(C,{active:"overview"===T,onClick:()=>I("overview"),icon:h,label:"Overview"}),a.jsx(C,{active:"reviews"===T,onClick:()=>I("reviews"),icon:p.Z,label:"Reviews",badge:_.length}),a.jsx(C,{active:"students"===T,onClick:()=>I("students"),icon:f.Z,label:"Students"}),a.jsx(C,{active:"alerts"===T,onClick:()=>I("alerts"),icon:x.Z,label:"Alerts",badge:S.length,urgent:S.length>0}),a.jsx(C,{active:"settings"===T,onClick:()=>I("settings"),icon:b,label:"Settings"})]})})]}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)(n.M,{mode:"wait",children:["overview"===T&&a.jsx(P,{currentLesson:N,students:v,doNowStats:Z,pendingReviews:_.length,selectedClass:g,onAdvanceLesson:V}),"reviews"===T&&a.jsx(q,{reviews:_,onReviewComplete:()=>g&&G(g.id)}),"students"===T&&a.jsx(A,{students:v,classId:g?.id,currentLessonId:N?.id||1}),"alerts"===T&&a.jsx(L,{alerts:S,onMarkRead:F}),"settings"===T&&a.jsx(M,{selectedClass:g,classes:t})]})})]})}function C({active:e,onClick:s,icon:t,label:r,badge:i,urgent:l}){return(0,a.jsxs)("button",{onClick:s,className:`flex items-center gap-2 px-4 py-3 font-medium transition-all border-b-2 ${e?"text-primary-400 border-primary-500 bg-primary-500/5":"text-surface-400 border-transparent hover:text-surface-200 hover:bg-surface-800/50"}`,children:[a.jsx(t,{size:18}),r,void 0!==i&&i>0&&a.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full font-semibold ${l?"bg-courage text-white":"bg-surface-700 text-surface-300"}`,children:i})]})}function P({currentLesson:e,students:s,doNowStats:t,pendingReviews:r,selectedClass:i,onAdvanceLesson:l}){return(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[a.jsx("div",{className:`card p-6 phase-${e?.phase_id}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[300px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,a.jsxs)("span",{className:`badge badge-${{1:"care",2:"creation",3:"courage",4:"community"}[e?.phase_id]}`,children:["Phase ",e?.phase_id,": ",{1:"Hardware",2:"Direction",3:"Toolbelt",4:"Blueprint"}[e?.phase_id]]}),(0,a.jsxs)("span",{className:"text-surface-500 text-sm",children:["Lesson ",e?.id," of 45"]})]}),a.jsx("h2",{className:"text-2xl font-bold text-surface-100 mb-2",children:e?.skill_name}),(0,a.jsxs)("p",{className:"text-surface-400 italic",children:['"',e?.compelling_question,'"']})]}),(0,a.jsxs)(c.E.button,{onClick:l,className:"btn btn-primary",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:e?.id===45,children:["Advance to Next Lesson ",a.jsx(g.Z,{size:18})]})]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[a.jsx(E,{icon:f.Z,label:"Students",value:s.length,color:"primary"}),a.jsx(E,{icon:j.Z,label:"Do Now Today",value:`${t.completed}/${t.total}`,color:"care",progress:t.completed/Math.max(t.total,1)*100}),a.jsx(E,{icon:p.Z,label:"Pending Reviews",value:r,color:"creation"}),a.jsx(E,{icon:v,label:"Course Progress",value:`${Math.round((e?.id||1)/45*100)}%`,color:"community",progress:(e?.id||1)/45*100})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h3",{className:"font-semibold text-surface-100 mb-4 flex items-center gap-2",children:[a.jsx(y.Z,{className:"text-primary-400",size:20}),"Class Join Code"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsx("div",{className:"px-6 py-4 bg-surface-800 rounded-xl border-2 border-dashed border-surface-600",children:a.jsx("span",{className:"text-4xl font-mono font-bold tracking-widest text-primary-400",children:i?.code})}),(0,a.jsxs)("div",{className:"text-surface-400 text-sm",children:[a.jsx("p",{children:"Share this code with students to join the class."}),a.jsx("p",{className:"mt-1",children:"Students enter their name + this code + create a PIN."})]})]})]})]},"overview")}function E({icon:e,label:s,value:t,color:r,progress:i}){return(0,a.jsxs)(c.E.div,{className:"card p-5",whileHover:{scale:1.02},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl bg-${r}/20 flex items-center justify-center`,children:a.jsx(e,{className:`text-${r}`,size:20})}),a.jsx("span",{className:"text-surface-400 text-sm",children:s})]}),a.jsx("div",{className:"text-3xl font-bold text-surface-100",children:t}),void 0!==i&&a.jsx("div",{className:"mt-3 progress-bar",children:a.jsx("div",{className:`progress-fill bg-${r}`,style:{width:`${i}%`}})})]})}function q({reviews:e,onReviewComplete:s}){let[t,i]=(0,r.useState)(null);return(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-surface-100",children:"Pending Reviews"}),(0,a.jsxs)("span",{className:"badge badge-creation",children:[e.length," pending"]})]}),0===e.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(p.Z,{size:48,className:"mx-auto mb-4 text-surface-600"}),a.jsx("h3",{className:"text-xl font-semibold text-surface-300 mb-2",children:"All caught up!"}),a.jsx("p",{className:"text-surface-500",children:"No challenge submissions waiting for review."})]}):a.jsx("div",{className:"grid lg:grid-cols-2 gap-4",children:e.map(e=>(0,a.jsxs)(c.E.div,{className:"card p-5 cursor-pointer hover:border-primary-500/30",onClick:()=>i(e),whileHover:{scale:1.01},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-surface-100",children:e.student?.name}),(0,a.jsxs)("p",{className:"text-sm text-surface-500",children:["Lesson ",e.lesson_id,": ",e.lesson?.skill_name]})]}),(0,a.jsxs)("span",{className:"badge badge-primary",children:[a.jsx(N.Z,{size:12,className:"mr-1"}),new Date(e.submitted_at).toLocaleDateString()]})]}),a.jsx("p",{className:"text-surface-400 text-sm line-clamp-2",children:e.reflections?.["What I did"]||"No description provided"}),(0,a.jsxs)("button",{className:"btn btn-primary btn-sm mt-3",children:["Review ",a.jsx(g.Z,{size:16})]})]},e.id))}),a.jsx(n.M,{children:t&&a.jsx(Z,{review:t,onClose:()=>i(null),onComplete:()=>{i(null),s()}})})]},"reviews")}function Z({review:e,onClose:s,onComplete:t}){let[l,n]=(0,r.useState)(3),[d,o]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),b=(0,i.e)(),g=async()=>{f(!0);try{await b.from("challenge_submissions").update({review_status:"reviewed",review_score:l,review_feedback:d,reviewed_at:new Date().toISOString(),approved_for_civic:u,civic_description:u?x:null}).eq("id",e.id),await b.from("world_states").update({trees:l>=3?1:0,tower:4===l?1:0}).eq("student_id",e.student_id),u&&x&&await b.from("civic_events").insert({class_id:e.class_id,phase_id:e.lesson?.phase_id||1,skill_name:e.lesson?.skill_name||"Unknown",skill_category:["care","creation","courage","community"][(e.lesson?.phase_id||1)-1],anonymized_description:x,event_type:"challenge_complete"}),t()}catch(e){console.error("Error submitting review:",e)}finally{f(!1)}};return a.jsx(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:s,children:(0,a.jsxs)(c.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-surface-900 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-surface-800 flex items-center justify-between sticky top-0 bg-surface-900 z-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"font-semibold text-surface-100",children:[e.student?.name,"'s Challenge"]}),(0,a.jsxs)("p",{className:"text-sm text-surface-500",children:["Lesson ",e.lesson_id,": ",e.lesson?.skill_name]})]}),a.jsx("button",{onClick:s,className:"text-surface-500 hover:text-surface-300 p-1",children:a.jsx(w.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-surface-200 mb-3",children:"Student's Response"}),(0,a.jsxs)("div",{className:"card p-4 bg-surface-800/50",children:[a.jsx("p",{className:"text-surface-300 whitespace-pre-wrap",children:e.reflections?.["What I did"]||"No description provided"}),e.reflections?.["Evidence/Proof"]&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-surface-700",children:[a.jsx("span",{className:"text-xs text-surface-500 uppercase tracking-wide",children:"Evidence"}),a.jsx("p",{className:"text-surface-400 mt-1",children:e.reflections["Evidence/Proof"]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-surface-200 mb-3",children:"Mastery Score"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(e=>a.jsx("button",{onClick:()=>n(e),className:`p-4 rounded-xl text-center transition-all ${l===e?"bg-primary-500 text-white ring-2 ring-primary-400":"bg-surface-800 text-surface-400 hover:bg-surface-700"}`,children:a.jsx("div",{className:"text-2xl font-bold",children:e})},e))}),a.jsx("p",{className:"text-sm text-surface-400 mt-2 text-center",children:{1:"Developing - Needs more effort and depth",2:"Approaching - Shows understanding but incomplete",3:"Meeting - Solid demonstration of skill",4:"Exceeding - Exceptional application of skill"}[l]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Feedback for Student"}),a.jsx("textarea",{className:"input",rows:3,placeholder:"What did they do well? What could they improve?",value:d,onChange:e=>o(e.target.value)})]}),(0,a.jsxs)("div",{className:"card p-4 bg-community/10 border-community/30",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),className:"w-5 h-5 rounded bg-surface-800 border-surface-600"}),a.jsx("span",{className:"text-surface-200",children:"Share anonymized version in Civic World"})]}),u&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("label",{className:"label",children:"Write an anonymized description"}),a.jsx("textarea",{className:"input",rows:2,placeholder:"A student demonstrated active listening by...",value:x,onChange:e=>m(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:s,className:"btn btn-secondary flex-1",children:"Cancel"}),a.jsx("button",{onClick:g,disabled:p,className:"btn btn-primary flex-1",children:p?"Submitting...":"Submit Review"})]})]})]})})}function A({students:e,classId:s,currentLessonId:t}){let[l,n]=(0,r.useState)({}),[d,o]=(0,r.useState)("");(0,i.e)();let x=e.filter(e=>e.name.toLowerCase().includes(d.toLowerCase()));return(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-surface-100",children:["Students (",e.length,")"]}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-500",size:18}),a.jsx("input",{type:"text",placeholder:"Search students...",className:"input pl-10 w-64",value:d,onChange:e=>o(e.target.value)})]})]}),0===x.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(f.Z,{size:48,className:"mx-auto mb-4 text-surface-600"}),a.jsx("h3",{className:"text-xl font-semibold text-surface-300 mb-2",children:"No students yet"}),a.jsx("p",{className:"text-surface-500",children:"Share your class code with students to get started."})]}):a.jsx("div",{className:"card overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[600px]",children:[a.jsx("thead",{className:"bg-surface-800",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left px-4 py-3 text-surface-400 font-medium text-sm",children:"Student"}),a.jsx("th",{className:"text-center px-4 py-3 text-surface-400 font-medium text-sm",children:"Do Now"}),a.jsx("th",{className:"text-center px-4 py-3 text-surface-400 font-medium text-sm",children:"Text"}),a.jsx("th",{className:"text-center px-4 py-3 text-surface-400 font-medium text-sm",children:"Scenario"}),a.jsx("th",{className:"text-center px-4 py-3 text-surface-400 font-medium text-sm",children:"Challenge"}),a.jsx("th",{className:"text-center px-4 py-3 text-surface-400 font-medium text-sm",children:"Status"})]})}),a.jsx("tbody",{children:x.map(e=>{let s=l[e.id]||{};return(0,a.jsxs)("tr",{className:"border-t border-surface-800 hover:bg-surface-800/50",children:[a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-community flex items-center justify-center text-white font-bold text-sm",children:e.name[0]}),a.jsx("span",{className:"text-surface-200 font-medium",children:e.name})]})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx(z,{complete:s.do_now_complete})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx(z,{complete:s.text_anchor_complete})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx(z,{complete:s.scenario_complete})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx(z,{complete:s.challenge_complete})}),a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("span",{className:`badge ${"complete"===s.status?"badge-care":"in_progress"===s.status?"badge-creation":"bg-surface-800 text-surface-500"}`,children:s.status||"Not started"})})]},e.id)})})]})})]},"students")}function z({complete:e}){return a.jsx("div",{className:`w-6 h-6 rounded-full mx-auto flex items-center justify-center ${e?"bg-care/20":"bg-surface-800"}`,children:e?a.jsx(k.Z,{size:14,className:"text-care"}):a.jsx("div",{className:"w-2 h-2 rounded-full bg-surface-600"})})}function L({alerts:e,onMarkRead:s}){let t={self_harm:{label:"Self-Harm Concern",color:"courage"},helplessness:{label:"Helplessness",color:"creation"},rage:{label:"Intense Anger",color:"courage"},abuse:{label:"Possible Abuse",color:"courage"}};return(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-surface-100",children:"Crisis Alerts"}),e.length>0&&(0,a.jsxs)("span",{className:"badge bg-courage text-white",children:[e.length," unread"]})]}),a.jsx("div",{className:"card p-4 bg-surface-800/50 border-surface-700",children:(0,a.jsxs)("p",{className:"text-surface-300 text-sm",children:[a.jsx("strong",{className:"text-surface-100",children:"Important:"})," These alerts are triggered when a student's conversation indicates they may be struggling. Reach out privately and consider involving school counselors."]})}),0===e.length?(0,a.jsxs)("div",{className:"card p-12 text-center",children:[a.jsx(k.Z,{size:48,className:"mx-auto mb-4 text-care"}),a.jsx("h3",{className:"text-xl font-semibold text-surface-300 mb-2",children:"No active alerts"}),a.jsx("p",{className:"text-surface-500",children:"All students appear to be doing well."})]}):a.jsx("div",{className:"space-y-4",children:e.map(e=>a.jsx(c.E.div,{className:"card p-5 border-courage/50 bg-courage/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[a.jsx(x.Z,{className:"text-courage",size:20}),a.jsx("span",{className:`badge badge-${t[e.trigger_type]?.color||"courage"}`,children:t[e.trigger_type]?.label||e.trigger_type}),a.jsx("span",{className:"text-surface-500 text-sm",children:new Date(e.created_at).toLocaleString()})]}),a.jsx("h3",{className:"font-semibold text-surface-100 mb-2",children:e.student?.name}),a.jsx("div",{className:"bg-surface-900 rounded-xl p-4 border border-surface-700",children:(0,a.jsxs)("p",{className:"text-surface-300 text-sm italic",children:['"',e.trigger_text,'"']})})]}),a.jsx("button",{onClick:()=>s(e.id),className:"btn btn-secondary btn-sm",children:"Mark as Read"})]})},e.id))})]},"alerts")}function M({selectedClass:e,classes:s}){return(0,a.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-surface-100",children:"Settings"}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h3",{className:"font-semibold text-surface-100 mb-4",children:"Class Codes"}),a.jsx("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-surface-800/50 rounded-xl",children:[a.jsx("span",{className:"text-surface-200",children:e.name}),a.jsx("span",{className:"font-mono text-xl font-bold text-primary-400",children:e.code})]},e.id))})]}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h3",{className:"font-semibold text-surface-100 mb-4",children:"Curriculum Overview"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-care/10 rounded-xl border border-care/30",children:[a.jsx("h4",{className:"font-semibold text-care mb-2",children:"Phase 1: Hardware"}),a.jsx("p",{className:"text-surface-400 text-sm",children:"Lessons 1-10: Self-Awareness, Attention, Impulse Control"})]}),(0,a.jsxs)("div",{className:"p-4 bg-creation/10 rounded-xl border border-creation/30",children:[a.jsx("h4",{className:"font-semibold text-creation mb-2",children:"Phase 2: Direction"}),a.jsx("p",{className:"text-surface-400 text-sm",children:"Lessons 11-22: Values, Resilience, Standards"})]}),(0,a.jsxs)("div",{className:"p-4 bg-courage/10 rounded-xl border border-courage/30",children:[a.jsx("h4",{className:"font-semibold text-courage mb-2",children:"Phase 3: Toolbelt"}),a.jsx("p",{className:"text-surface-400 text-sm",children:"Lessons 23-32: Strategy, Risk, Agency"})]}),(0,a.jsxs)("div",{className:"p-4 bg-community/10 rounded-xl border border-community/30",children:[a.jsx("h4",{className:"font-semibold text-community mb-2",children:"Phase 4: Blueprint"}),a.jsx("p",{className:"text-surface-400 text-sm",children:"Lessons 33-45: Leadership, Service, Legacy"})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[a.jsx("h3",{className:"font-semibold text-surface-100 mb-4",children:"About Leadership 2.0"}),a.jsx("p",{className:"text-surface-400 mb-4",children:"A research-backed leadership development platform that builds real skills through real action. Students develop executive function, resilience, and leadership capacity through daily practice."}),(0,a.jsxs)("p",{className:"text-surface-500 text-sm",children:[a.jsx("strong",{children:"Principle:"}),' "The 51/49 Rule" â€” Master yourself before leading others. Consistency over intensity. Deeds not words.']})]})]},"settings")}},9701:(e,s,t)=>{"use strict";t.d(s,{e:()=>i});var a=t(146);let r=null;function i(){if(r)return r;let e=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!s)throw Error("Missing Supabase environment variables. Please ensure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set.");return r=(0,a.createBrowserClient)(e,s)}},7685:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,metadata:()=>i});var a=t(9510);t(5023);let r=(0,t(8570).createProxy)(String.raw`/workspace/leadership-platform/src/app/error-boundary-wrapper.tsx#ErrorBoundaryWrapper`),i={title:"Leadership 2.0 | Build Real Skills Through Real Action",description:"A revolutionary leadership development platform for high school students",keywords:["leadership","education","skills","development","high school"],authors:[{name:"Leadership 2.0"}],viewport:"width=device-width, initial-scale=1, maximum-scale=1"};function l({children:e}){return a.jsx("html",{lang:"en",className:"dark",children:a.jsx("body",{className:"antialiased",children:a.jsx(r,{children:e})})})}},2973:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/workspace/leadership-platform/src/app/teacher/page.tsx#default`)},5023:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,396,290],()=>t(1369));module.exports=a})();