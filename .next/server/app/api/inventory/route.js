"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},79:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>y,routeModule:()=>l,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>c,POST:()=>d});var i=r(9919),s=r(7665),o=r(8747),a=r(2380);async function u(){let e="https://apakkhzuydsfzvypewwa.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwYWtraHp1eWRzZnp2eXBld3dhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1MDEyODQsImV4cCI6MjA4NDA3NzI4NH0.c3hiZOEKMIXMP7aB0SVgrbQH58nwxseycVmeH23KsNQ";if(!e||!t)throw Error("Missing Supabase environment variables");return(0,a.eI)(e,t)}var p=r(8635);async function d(e){try{let{studentId:t,itemType:r,earnedFrom:n,earnedDescription:i}=await e.json();if(!t||!r)return p.NextResponse.json({error:"Missing required fields"},{status:400});let s=await u(),{data:o}=await s.from("placement_inventory").select("id, quantity").eq("student_id",t).eq("item_type",r).single();if(o){let{error:e}=await s.from("placement_inventory").update({quantity:o.quantity+1}).eq("id",o.id);if(e)throw e}else{let{error:e}=await s.from("placement_inventory").insert({student_id:t,item_type:r,quantity:1,earned_from:n||"activity",earned_description:i||"Earned from activity"});if(e)throw e}return p.NextResponse.json({success:!0})}catch(e){return console.error("Inventory API error:",e),p.NextResponse.json({error:"Failed to update inventory"},{status:500})}}async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("studentId");if(!r)return p.NextResponse.json({error:"Missing studentId"},{status:400});let n=await u(),{data:i,error:s}=await n.from("placement_inventory").select("*").eq("student_id",r).gt("quantity",0);if(s)throw s;return p.NextResponse.json({inventory:i||[]})}catch(e){return console.error("Inventory GET error:",e),p.NextResponse.json({error:"Failed to get inventory"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/inventory/route",pathname:"/api/inventory",filename:"route",bundlePath:"app/api/inventory/route"},resolvedPagePath:"/workspace/leadership-platform/src/app/api/inventory/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:m,serverHooks:v}=l,x="/api/inventory/route";function f(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[469,16],()=>r(79));module.exports=n})();